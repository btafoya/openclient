import{_ as S,b as M,h as f,i as d,H as h,r as k,q as _,k as v,o,e as t,l as p,j as m,w as B,v as L,c as n,F as N,g as V,t as c,d as D}from"./main-DbkULGVR.js";import{u as b}from"./contacts-VHl-rLxO.js";import{A as T}from"./AdminLayout-BDc3K8NM.js";import"./index-B9ygI19o.js";const A={__name:"ContactList",setup(w,{expose:e}){e();const i=h(),r=b(),x=k(""),y=_(()=>r.filteredContacts);async function a(){await r.fetchContacts()}function s(){r.setSearchTerm(x.value)}function u(l){i.push(`/crm/contacts/${l.id}/edit`)}function C(l){i.push(`/crm/contacts/${l.id}`)}async function j(l){confirm(`Delete contact ${r.getFullName(l)}?`)&&await r.deleteContact(l.id)}v(()=>a());const g={router:i,contactStore:r,searchTerm:x,displayedContacts:y,loadContacts:a,handleSearch:s,handleEdit:u,handleView:C,confirmDelete:j,ref:k,computed:_,onMounted:v,get useRouter(){return h},get useContactStore(){return b},AdminLayout:T};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}},E={class:"space-y-6"},H={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},z={class:"flex flex-col gap-4 sm:flex-row sm:items-center"},F={class:"flex-1 relative"},P={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},R={key:0,class:"p-8 text-center"},$={key:1,class:"p-8 text-center"},q={key:2,class:"min-w-full"},I={class:"divide-y divide-gray-200 dark:divide-gray-700"},O={class:"px-5 py-4"},U={class:"px-5 py-4 text-sm text-gray-700 dark:text-gray-300"},G={class:"px-5 py-4 text-sm text-gray-700 dark:text-gray-300"},J={class:"px-5 py-4 text-sm text-gray-700 dark:text-gray-300"},K={key:1},Q={class:"px-5 py-4"},W={key:0,class:"inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400"},X={class:"px-5 py-4"},Y={class:"flex items-center justify-end gap-2"},Z=["onClick"],tt=["onClick"];function et(w,e,i,r,x,y){const a=M("router-link");return o(),f(r.AdminLayout,null,{default:d(()=>[t("div",E,[t("div",H,[e[2]||(e[2]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Contacts"),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Manage your client contacts")],-1)),p(a,{to:"/crm/contacts/create",class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-brand-600 rounded-lg hover:bg-brand-700"},{default:d(()=>[...e[1]||(e[1]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" New Contact ",-1)])]),_:1})]),t("div",z,[t("div",F,[B(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.searchTerm=s),onInput:r.handleSearch,type:"text",placeholder:"Search contacts...",class:"w-full px-4 py-2 pl-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},null,544),[[L,r.searchTerm]]),e[3]||(e[3]=t("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),t("div",P,[r.contactStore.loading?(o(),n("div",R,[...e[4]||(e[4]=[t("div",{class:"inline-block w-8 h-8 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"Loading...",-1)])])):r.displayedContacts.length===0?(o(),n("div",$,[...e[5]||(e[5]=[t("p",{class:"text-sm text-gray-900 dark:text-white font-medium"},"No contacts found",-1)])])):(o(),n("table",q,[e[9]||(e[9]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-5 py-3 text-left"},[t("p",{class:"font-medium text-gray-500 text-xs dark:text-gray-400"},"Name")]),t("th",{class:"px-5 py-3 text-left"},[t("p",{class:"font-medium text-gray-500 text-xs dark:text-gray-400"},"Email")]),t("th",{class:"px-5 py-3 text-left"},[t("p",{class:"font-medium text-gray-500 text-xs dark:text-gray-400"},"Phone")]),t("th",{class:"px-5 py-3 text-left"},[t("p",{class:"font-medium text-gray-500 text-xs dark:text-gray-400"},"Client")]),t("th",{class:"px-5 py-3 text-left"},[t("p",{class:"font-medium text-gray-500 text-xs dark:text-gray-400"},"Primary")]),t("th",{class:"px-5 py-3 text-right"},[t("p",{class:"font-medium text-gray-500 text-xs dark:text-gray-400"},"Actions")])])],-1)),t("tbody",I,[(o(!0),n(N,null,V(r.displayedContacts,s=>(o(),n("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800/50"},[t("td",O,[p(a,{to:`/crm/contacts/${s.id}`,class:"font-medium text-gray-800 dark:text-white hover:text-brand-600"},{default:d(()=>[m(c(r.contactStore.getFullName(s)),1)]),_:2},1032,["to"])]),t("td",U,c(s.email||"—"),1),t("td",G,c(s.phone||"—"),1),t("td",J,[s.client_id?(o(),f(a,{key:0,to:`/crm/clients/${s.client_id}`,class:"hover:text-brand-600"},{default:d(()=>[m(c(s.client_name),1)]),_:2},1032,["to"])):(o(),n("span",K,"—"))]),t("td",Q,[s.is_primary?(o(),n("span",W,"Primary")):D("v-if",!0)]),t("td",X,[t("div",Y,[p(a,{to:`/crm/contacts/${s.id}`,class:"p-1.5 text-gray-600 hover:text-brand-600 dark:text-gray-400",title:"View"},{default:d(()=>[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),_:1},8,["to"]),t("button",{onClick:u=>r.handleEdit(s),class:"p-1.5 text-gray-600 hover:text-brand-600 dark:text-gray-400",title:"Edit"},[...e[7]||(e[7]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Z),t("button",{onClick:u=>r.confirmDelete(s),class:"p-1.5 text-gray-600 hover:text-red-600 dark:text-gray-400",title:"Delete"},[...e[8]||(e[8]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,tt)])])]))),128))])]))])])]),_:1})}const nt=S(A,[["render",et],["__file","/home/btafoya/projects/openclient/resources/js/src/views/CRM/Contacts/ContactList.vue"]]);export{nt as default};
