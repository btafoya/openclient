import{_ as ae,b as oe,h as de,i as F,H as T,I as N,r as u,u as A,k as B,q as ie,o as g,e,d as i,c as m,F as P,l as S,t as l,L as E,j as k,n as V,g as z,C as H,w as x,v as w,z as I}from"./main-DU1UAF-x.js";import{u as R}from"./deals-olnJXo6E.js";import{u as W}from"./pipelines-CNpCPQuv.js";import{A as le}from"./AdminLayout-Baccdx-S.js";import"./index-B9ygI19o.js";const se={__name:"DealDetail",setup(q,{expose:t}){t();const j=T(),r=N(),y=R(),D=W(),b=u(!0),v=u(!1),f=u(!1),s=u(null),p=u([]),h=u([]),_=u(!1),C=u(!1),c=A({name:"",value:0,expected_close_date:"",priority:"normal",description:""}),a=A({type:"note",description:"",notes:""});async function M(){b.value=!0;try{const o=r.params.id;if(s.value=await y.fetchDeal(o),c.name=s.value.name,c.value=s.value.value||0,c.expected_close_date=s.value.expected_close_date||"",c.priority=s.value.priority||"normal",c.description=s.value.description||"",s.value.pipeline_id){const d=await D.fetchPipeline(s.value.pipeline_id);h.value=d.stages||[]}p.value=await y.fetchActivities(o)}catch(o){console.error("Failed to load deal:",o),alert("Failed to load deal. Please try again."),j.push("/deals")}finally{b.value=!1}}async function O(){var o,d;v.value=!0;try{await y.updateDeal(s.value.id,c),s.value={...s.value,...c},_.value=!1}catch(n){console.error("Failed to update deal:",n),alert(((d=(o=n.response)==null?void 0:o.data)==null?void 0:d.error)||"Failed to update deal. Please try again.")}finally{v.value=!1}}async function G(){var o,d;if(confirm("Mark this deal as won?"))try{s.value=await y.markWon(s.value.id),await M()}catch(n){console.error("Failed to mark deal as won:",n),alert(((d=(o=n.response)==null?void 0:o.data)==null?void 0:d.error)||"Failed to update deal. Please try again.")}}async function Q(){var d,n;const o=prompt("Reason for losing this deal (optional):");try{s.value=await y.markLost(s.value.id,o),await M()}catch(U){console.error("Failed to mark deal as lost:",U),alert(((n=(d=U.response)==null?void 0:d.data)==null?void 0:n.error)||"Failed to update deal. Please try again.")}}async function J(){var o,d;if(confirm("Convert this deal to a project? This action cannot be undone."))try{const n=await y.convertToProject(s.value.id);alert("Deal converted to project successfully!"),j.push(`/projects/${n.project.id}`)}catch(n){console.error("Failed to convert deal:",n),alert(((d=(o=n.response)==null?void 0:o.data)==null?void 0:d.error)||"Failed to convert deal. Please try again.")}}async function K(){var o,d;f.value=!0;try{const n=await y.addActivity(s.value.id,a);p.value.unshift(n),C.value=!1,a.type="note",a.description="",a.notes=""}catch(n){console.error("Failed to add activity:",n),alert(((d=(o=n.response)==null?void 0:o.data)==null?void 0:d.error)||"Failed to add activity. Please try again.")}finally{f.value=!1}}function X(o){return Number(o).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}function Y(o){return o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}function Z(o){return o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):""}function $(o){return o?o.split(" ").map(d=>d[0]).join("").substring(0,2).toUpperCase():"?"}function ee(o){const d={low:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",normal:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",high:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",urgent:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"};return d[o]||d.normal}function te(o){return{call:"bg-blue-500",email:"bg-purple-500",meeting:"bg-green-500",note:"bg-gray-500",task:"bg-orange-500",stage_change:"bg-brand-500"}[o]||"bg-gray-500"}function re(o){return{call:"ðŸ“ž",email:"ðŸ“§",meeting:"ðŸ“…",note:"ðŸ“",task:"âœ“",stage_change:"â†’"}[o]||"â€¢"}B(()=>{M()});const L={router:j,route:r,dealStore:y,pipelineStore:D,loading:b,saving:v,savingActivity:f,deal:s,activities:p,pipelineStages:h,showEditModal:_,showActivityModal:C,editForm:c,activityForm:a,loadDeal:M,handleUpdate:O,handleMarkWon:G,handleMarkLost:Q,handleConvertToProject:J,handleAddActivity:K,formatCurrency:X,formatDate:Y,formatDateTime:Z,getInitials:$,priorityClass:ee,activityTypeClass:te,activityTypeIcon:re,ref:u,reactive:A,computed:ie,onMounted:B,get useRouter(){return T},get useRoute(){return N},get useDealStore(){return R},get usePipelineStore(){return W},AdminLayout:le};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}},ne={class:"space-y-6"},ge={key:0,class:"p-8 text-center"},me={class:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between"},ce={class:"flex items-start gap-4"},ye={class:"flex items-center gap-3"},ue={class:"text-2xl font-bold text-gray-900 dark:text-white"},xe={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},be={class:"flex items-center gap-2"},ve={class:"grid gap-6 lg:grid-cols-3"},fe={class:"lg:col-span-2 space-y-6"},pe={class:"bg-white dark:bg-white/[0.03] rounded-xl border border-gray-200 dark:border-gray-800 p-6"},ke={class:"grid grid-cols-2 gap-4"},we={class:"mt-1 text-lg font-semibold text-gray-900 dark:text-white"},he={class:"mt-1 text-lg font-semibold text-gray-900 dark:text-white"},_e={class:"mt-1 text-gray-900 dark:text-white"},Ce={class:"mt-1"},je={class:"mt-1 text-gray-900 dark:text-white"},Me={class:"mt-1 text-gray-900 dark:text-white"},Fe={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-800"},De={class:"text-sm text-gray-600 dark:text-gray-400 whitespace-pre-wrap"},Ae={class:"bg-white dark:bg-white/[0.03] rounded-xl border border-gray-200 dark:border-gray-800 p-6"},Pe={class:"flex items-center justify-between mb-4"},Se={key:0,class:"py-8 text-center"},Ve={key:1,class:"space-y-4"},Le={class:"flex-shrink-0"},Ue={class:"flex-1 min-w-0"},Te={class:"text-sm text-gray-900 dark:text-white"},Ne={class:"font-medium"},Be={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Ee={class:"mt-1 text-xs text-gray-400 dark:text-gray-500"},ze={class:"space-y-6"},He={class:"bg-white dark:bg-white/[0.03] rounded-xl border border-gray-200 dark:border-gray-800 p-6"},Ie={class:"space-y-2"},Re={class:"bg-white dark:bg-white/[0.03] rounded-xl border border-gray-200 dark:border-gray-800 p-6"},We={class:"text-2xl font-bold text-gray-900 dark:text-white"},qe={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Oe={key:0,class:"bg-white dark:bg-white/[0.03] rounded-xl border border-gray-200 dark:border-gray-800 p-6"},Ge={class:"w-10 h-10 rounded-full bg-brand-100 dark:bg-brand-900/30 flex items-center justify-center"},Qe={class:"text-brand-600 font-medium"},Je={class:"text-sm font-medium text-gray-900 dark:text-white"},Ke={key:1,class:"bg-white dark:bg-white/[0.03] rounded-xl border border-gray-200 dark:border-gray-800 p-6"},Xe={key:2,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ye={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ze={class:"inline-block align-bottom bg-white dark:bg-gray-900 rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},$e={class:"px-6 pt-6 pb-4"},et={class:"space-y-4"},tt={class:"grid grid-cols-2 gap-4"},rt={class:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 flex justify-end gap-3"},at=["disabled"],ot={key:3,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},dt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},it={class:"inline-block align-bottom bg-white dark:bg-gray-900 rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},lt={class:"px-6 pt-6 pb-4"},st={class:"space-y-4"},nt={class:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 flex justify-end gap-3"},gt=["disabled"];function mt(q,t,j,r,y,D){const b=oe("router-link");return g(),de(r.AdminLayout,null,{default:F(()=>{var v,f,s,p,h,_,C,c;return[e("div",ne,[i(" Loading State "),r.loading&&!r.deal?(g(),m("div",ge,[...t[14]||(t[14]=[e("div",{class:"inline-block w-8 h-8 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"Loading deal...",-1)])])):r.deal?(g(),m(P,{key:1},[i(" Page Header "),e("div",me,[e("div",ce,[S(b,{to:"/deals",class:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},{default:F(()=>[...t[15]||(t[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),e("div",null,[e("div",ye,[e("h1",ue,l(r.deal.name),1),e("span",{class:"px-2 py-1 text-xs font-medium rounded-full",style:E({backgroundColor:((v=r.deal.stage)==null?void 0:v.color)+"20",color:(f=r.deal.stage)==null?void 0:f.color})},l((s=r.deal.stage)==null?void 0:s.name),5)]),e("p",xe,l(r.deal.client_name||"No client assigned"),1)])]),e("div",be,[e("button",{onClick:t[0]||(t[0]=a=>r.showEditModal=!0),class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700"},[...t[16]||(t[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),k(" Edit ",-1)])]),r.deal.is_active&&!((p=r.deal.stage)!=null&&p.is_won)&&!((h=r.deal.stage)!=null&&h.is_lost)?(g(),m("button",{key:0,onClick:r.handleMarkWon,class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700"},[...t[17]||(t[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),k(" Mark Won ",-1)])])):i("v-if",!0),r.deal.is_active&&!((_=r.deal.stage)!=null&&_.is_won)&&!((C=r.deal.stage)!=null&&C.is_lost)?(g(),m("button",{key:1,onClick:r.handleMarkLost,class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700"},[...t[18]||(t[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),k(" Mark Lost ",-1)])])):i("v-if",!0),(c=r.deal.stage)!=null&&c.is_won&&!r.deal.project_id?(g(),m("button",{key:2,onClick:r.handleConvertToProject,class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-brand-600 rounded-lg hover:bg-brand-700"},[...t[19]||(t[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),k(" Convert to Project ",-1)])])):i("v-if",!0)])]),i(" Deal Info Grid "),e("div",ve,[i(" Main Info "),e("div",fe,[i(" Details Card "),e("div",pe,[t[27]||(t[27]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Deal Details",-1)),e("dl",ke,[e("div",null,[t[20]||(t[20]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Value",-1)),e("dd",we," $"+l(r.formatCurrency(r.deal.value||0)),1)]),e("div",null,[t[21]||(t[21]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Probability",-1)),e("dd",he,l(r.deal.probability||0)+"% ",1)]),e("div",null,[t[22]||(t[22]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Expected Close",-1)),e("dd",_e,l(r.deal.expected_close_date?r.formatDate(r.deal.expected_close_date):"Not set"),1)]),e("div",null,[t[23]||(t[23]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Priority",-1)),e("dd",Ce,[e("span",{class:V(["inline-flex items-center px-2 py-1 text-xs font-medium rounded-full",r.priorityClass(r.deal.priority)])},l(r.deal.priority||"Normal"),3)])]),e("div",null,[t[24]||(t[24]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Pipeline",-1)),e("dd",je,l(r.deal.pipeline_name||"Unknown"),1)]),e("div",null,[t[25]||(t[25]=e("dt",{class:"text-sm text-gray-500 dark:text-gray-400"},"Owner",-1)),e("dd",Me,l(r.deal.owner_name||"Unassigned"),1)])]),r.deal.description?(g(),m("div",Fe,[t[26]||(t[26]=e("h3",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"},"Description",-1)),e("p",De,l(r.deal.description),1)])):i("v-if",!0)]),i(" Activities "),e("div",Ae,[e("div",Pe,[t[29]||(t[29]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Activity",-1)),e("button",{onClick:t[1]||(t[1]=a=>r.showActivityModal=!0),class:"inline-flex items-center gap-1 text-sm text-brand-600 hover:text-brand-700"},[...t[28]||(t[28]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),k(" Add Activity ",-1)])])]),r.activities.length?(g(),m("div",Ve,[(g(!0),m(P,null,z(r.activities,a=>(g(),m("div",{key:a.id,class:"flex gap-3"},[e("div",Le,[e("div",{class:V(["w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium",r.activityTypeClass(a.type)])},l(r.activityTypeIcon(a.type)),3)]),e("div",Ue,[e("p",Te,[e("span",Ne,l(a.user_name||"System"),1),k(" "+l(a.description),1)]),a.notes?(g(),m("p",Be,l(a.notes),1)):i("v-if",!0),e("p",Ee,l(r.formatDateTime(a.created_at)),1)])]))),128))])):(g(),m("div",Se,[...t[30]||(t[30]=[e("svg",{class:"mx-auto w-12 h-12 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"No activity recorded yet",-1)])]))])]),i(" Sidebar "),e("div",ze,[i(" Stage Progress "),e("div",He,[t[31]||(t[31]=e("h3",{class:"text-sm font-medium text-gray-900 dark:text-white mb-4"},"Pipeline Progress",-1)),e("div",Ie,[(g(!0),m(P,null,z(r.pipelineStages,a=>(g(),m("div",{key:a.id,class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 rounded-full",style:E({backgroundColor:a.id===r.deal.stage_id?a.color:"#e5e7eb"})},null,4),e("span",{class:V(["text-sm",a.id===r.deal.stage_id?"text-gray-900 dark:text-white font-medium":"text-gray-500 dark:text-gray-400"])},l(a.name),3)]))),128))])]),i(" Quick Stats "),e("div",Re,[t[32]||(t[32]=e("h3",{class:"text-sm font-medium text-gray-900 dark:text-white mb-4"},"Weighted Value",-1)),e("p",We," $"+l(r.formatCurrency((r.deal.value||0)*((r.deal.probability||0)/100))),1),e("p",qe,l(r.deal.probability||0)+"% of $"+l(r.formatCurrency(r.deal.value||0)),1)]),i(" Client Info "),r.deal.client_id?(g(),m("div",Oe,[t[34]||(t[34]=e("h3",{class:"text-sm font-medium text-gray-900 dark:text-white mb-4"},"Client",-1)),S(b,{to:`/crm/clients/${r.deal.client_id}`,class:"flex items-center gap-3 p-3 -m-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-900/50"},{default:F(()=>[e("div",Ge,[e("span",Qe,l(r.getInitials(r.deal.client_name)),1)]),e("div",null,[e("p",Je,l(r.deal.client_name),1),t[33]||(t[33]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"View client profile",-1))])]),_:1},8,["to"])])):i("v-if",!0),i(" Project Link "),r.deal.project_id?(g(),m("div",Ke,[t[36]||(t[36]=e("h3",{class:"text-sm font-medium text-gray-900 dark:text-white mb-4"},"Linked Project",-1)),S(b,{to:`/projects/${r.deal.project_id}`,class:"flex items-center gap-3 p-3 -m-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-900/50"},{default:F(()=>[...t[35]||(t[35]=[e("div",{class:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1),e("div",null,[e("p",{class:"text-sm font-medium text-gray-900 dark:text-white"},"View Project"),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Converted from this deal")],-1)])]),_:1},8,["to"])])):i("v-if",!0)])])],64)):i("v-if",!0),i(" Edit Modal "),r.showEditModal?(g(),m("div",Xe,[e("div",Ye,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[2]||(t[2]=a=>r.showEditModal=!1)}),e("div",Ze,[e("form",{onSubmit:H(r.handleUpdate,["prevent"])},[e("div",$e,[t[43]||(t[43]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Edit Deal",-1)),e("div",et,[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Name *",-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.editForm.name=a),type:"text",required:"",class:"w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},null,512),[[w,r.editForm.name]])]),e("div",tt,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Value ($)",-1)),x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>r.editForm.value=a),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},null,512),[[w,r.editForm.value,void 0,{number:!0}]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Expected Close",-1)),x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>r.editForm.expected_close_date=a),type:"date",class:"w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},null,512),[[w,r.editForm.expected_close_date]])])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Priority",-1)),x(e("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>r.editForm.priority=a),class:"w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},[...t[40]||(t[40]=[e("option",{value:"low"},"Low",-1),e("option",{value:"normal"},"Normal",-1),e("option",{value:"high"},"High",-1),e("option",{value:"urgent"},"Urgent",-1)])],512),[[I,r.editForm.priority]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Description",-1)),x(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=a=>r.editForm.description=a),rows:"3",class:"w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},null,512),[[w,r.editForm.description]])])])]),e("div",rt,[e("button",{type:"button",onClick:t[8]||(t[8]=a=>r.showEditModal=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700"}," Cancel "),e("button",{type:"submit",disabled:r.saving,class:"px-4 py-2 text-sm font-medium text-white bg-brand-600 rounded-lg hover:bg-brand-700 disabled:opacity-50"},l(r.saving?"Saving...":"Save Changes"),9,at)])],32)])])])):i("v-if",!0),i(" Activity Modal "),r.showActivityModal?(g(),m("div",ot,[e("div",dt,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[9]||(t[9]=a=>r.showActivityModal=!1)}),e("div",it,[e("form",{onSubmit:H(r.handleAddActivity,["prevent"])},[e("div",lt,[t[48]||(t[48]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Add Activity",-1)),e("div",st,[e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Type *",-1)),x(e("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>r.activityForm.type=a),required:"",class:"w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},[...t[44]||(t[44]=[e("option",{value:"call"},"Call",-1),e("option",{value:"email"},"Email",-1),e("option",{value:"meeting"},"Meeting",-1),e("option",{value:"note"},"Note",-1),e("option",{value:"task"},"Task",-1)])],512),[[I,r.activityForm.type]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Description *",-1)),x(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>r.activityForm.description=a),type:"text",required:"",class:"w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"e.g., Follow-up call scheduled"},null,512),[[w,r.activityForm.description]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Notes",-1)),x(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=a=>r.activityForm.notes=a),rows:"3",class:"w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Additional details..."},null,512),[[w,r.activityForm.notes]])])])]),e("div",nt,[e("button",{type:"button",onClick:t[13]||(t[13]=a=>r.showActivityModal=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700"}," Cancel "),e("button",{type:"submit",disabled:r.savingActivity,class:"px-4 py-2 text-sm font-medium text-white bg-brand-600 rounded-lg hover:bg-brand-700 disabled:opacity-50"},l(r.savingActivity?"Adding...":"Add Activity"),9,gt)])],32)])])])):i("v-if",!0)])]}),_:1})}const vt=ae(se,[["render",mt],["__file","/home/btafoya/projects/openclient/resources/js/src/views/Pipelines/DealDetail.vue"]]);export{vt as default};
