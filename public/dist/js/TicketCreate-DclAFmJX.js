import{_ as U,b as q,h as L,i as f,H as S,r as b,u as h,k as j,o as l,e,d as a,l as T,j as n,C as N,c as m,w as s,v as p,F as A,g as H,t as x,z as k}from"./main-Dc7XXzbq.js";import{u as V}from"./tickets-BtA3sVWy.js";import{u as B}from"./clients-DtdxGGMB.js";import{A as P}from"./AdminLayout-DxqTGoZO.js";import"./index-B9ygI19o.js";const R={__name:"TicketCreate",setup(D,{expose:r}){r();const y=S(),t=V(),u=B(),g=b(!1),i=b(null),o=b([]),v=h({subject:"",description:"",client_id:"",priority:"normal",category:"general",due_date:""});async function w(){try{await u.fetchClients(),o.value=u.clients}catch(c){console.error("Failed to load clients:",c)}}async function F(){var c,C;i.value=null,g.value=!0;try{const d={...v};d.client_id||delete d.client_id,d.due_date||delete d.due_date;const M=await t.createTicket(d);y.push(`/tickets/${M.id}`)}catch(d){console.error("Failed to create ticket:",d),i.value=((C=(c=d.response)==null?void 0:c.data)==null?void 0:C.error)||"Failed to create ticket. Please try again."}finally{g.value=!1}}j(()=>{w()});const _={router:y,ticketStore:t,clientStore:u,submitting:g,error:i,clients:o,form:v,loadClients:w,submitForm:F,ref:b,reactive:h,onMounted:j,get useRouter(){return S},get useTicketStore(){return V},get useClientStore(){return B},AdminLayout:P};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},z={class:"mx-auto max-w-3xl space-y-6"},E={class:"flex items-center justify-between"},G={class:"rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-gray-900"},O={class:"space-y-6"},I=["value"],J={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},K={key:0,class:"p-4 bg-red-50 border border-red-200 rounded-lg dark:bg-red-900/20 dark:border-red-800"},Q={class:"text-sm text-red-700 dark:text-red-400"},W={class:"flex justify-end gap-3"},X=["disabled"],Y={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"};function Z(D,r,y,t,u,g){const i=q("router-link");return l(),L(t.AdminLayout,null,{default:f(()=>[e("div",z,[a(" Header "),e("div",E,[r[7]||(r[7]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create Support Ticket"),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Submit a new support request ")],-1)),T(i,{to:"/tickets",class:"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300"},{default:f(()=>[...r[6]||(r[6]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),n(" Cancel ",-1)])]),_:1})]),a(" Form "),e("form",{onSubmit:N(t.submitForm,["prevent"]),class:"space-y-6"},[e("div",G,[e("div",O,[a(" Subject "),e("div",null,[r[8]||(r[8]=e("label",{for:"subject",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[n(" Subject "),e("span",{class:"text-red-500"},"*")],-1)),s(e("input",{id:"subject","onUpdate:modelValue":r[0]||(r[0]=o=>t.form.subject=o),type:"text",required:"",class:"mt-1 w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Brief description of the issue"},null,512),[[p,t.form.subject]])]),a(" Client "),e("div",null,[r[10]||(r[10]=e("label",{for:"client_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Client ",-1)),s(e("select",{id:"client_id","onUpdate:modelValue":r[1]||(r[1]=o=>t.form.client_id=o),class:"mt-1 w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},[r[9]||(r[9]=e("option",{value:""},"Select a client (optional)",-1)),(l(!0),m(A,null,H(t.clients,o=>(l(),m("option",{key:o.id,value:o.id},x(o.name),9,I))),128))],512),[[k,t.form.client_id]])]),e("div",J,[a(" Priority "),e("div",null,[r[12]||(r[12]=e("label",{for:"priority",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Priority ",-1)),s(e("select",{id:"priority","onUpdate:modelValue":r[2]||(r[2]=o=>t.form.priority=o),class:"mt-1 w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},[...r[11]||(r[11]=[e("option",{value:"low"},"Low",-1),e("option",{value:"normal"},"Normal",-1),e("option",{value:"high"},"High",-1),e("option",{value:"urgent"},"Urgent",-1)])],512),[[k,t.form.priority]])]),a(" Category "),e("div",null,[r[14]||(r[14]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Category ",-1)),s(e("select",{id:"category","onUpdate:modelValue":r[3]||(r[3]=o=>t.form.category=o),class:"mt-1 w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},[...r[13]||(r[13]=[e("option",{value:"general"},"General",-1),e("option",{value:"technical"},"Technical",-1),e("option",{value:"billing"},"Billing",-1),e("option",{value:"feature_request"},"Feature Request",-1),e("option",{value:"bug"},"Bug Report",-1)])],512),[[k,t.form.category]])])]),a(" Due Date "),e("div",null,[r[15]||(r[15]=e("label",{for:"due_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Due Date ",-1)),s(e("input",{id:"due_date","onUpdate:modelValue":r[4]||(r[4]=o=>t.form.due_date=o),type:"date",class:"mt-1 w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},null,512),[[p,t.form.due_date]])]),a(" Description "),e("div",null,[r[16]||(r[16]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[n(" Description "),e("span",{class:"text-red-500"},"*")],-1)),s(e("textarea",{id:"description","onUpdate:modelValue":r[5]||(r[5]=o=>t.form.description=o),rows:"6",required:"",class:"mt-1 w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Detailed description of the issue or request..."},null,512),[[p,t.form.description]])])])]),a(" Error Message "),t.error?(l(),m("div",K,[e("p",Q,x(t.error),1)])):a("v-if",!0),a(" Submit Button "),e("div",W,[T(i,{to:"/tickets",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"},{default:f(()=>[...r[17]||(r[17]=[n(" Cancel ",-1)])]),_:1}),e("button",{type:"submit",disabled:t.submitting,class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-brand-600 rounded-lg hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed"},[t.submitting?(l(),m("svg",Y,[...r[18]||(r[18]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):a("v-if",!0),n(" "+x(t.submitting?"Creating...":"Create Ticket"),1)],8,X)])],32)])]),_:1})}const ae=U(R,[["render",Z],["__file","/home/btafoya/projects/openclient/resources/js/src/views/Tickets/TicketCreate.vue"]]);export{ae as default};
