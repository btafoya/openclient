import{_ as z,c as a,o,d as n,e,F as R,t as i,n as T,q as v,h as A,G as X,s as f,g as O,l as j,j as k,r as w,k as H,b as Y,i as B,I as N,H as V}from"./main-DbkULGVR.js";import{u as E}from"./invoices-CqPkO7Sb.js";import{u as P}from"./payments-CUCB3TNt.js";import{A as Z}from"./AdminLayout-BDc3K8NM.js";import"./index-B9ygI19o.js";const $={__name:"PaymentButton",props:{invoiceId:{type:String,required:!0},amount:{type:Number,default:0},currency:{type:String,default:"USD"},label:{type:String,default:"Pay Now"},buttonClass:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["success","error","processing"],setup(b,{expose:r,emit:x}){r();const t=b,l=x,u=P(),s=v(()=>u.processingPayment),m=v(()=>t.disabled||s.value||!u.isStripeConfigured),y=v(()=>s.value?"Processing...":u.isStripeConfigured?t.amount>0?`${t.label} $${t.amount.toFixed(2)}`:t.label:"Payments Unavailable");async function c(){if(!m.value){l("processing",!0);try{await u.redirectToCheckout(t.invoiceId),l("success")}catch(p){console.error("Payment initiation failed:",p),l("error",p.message||"Failed to initiate payment"),l("processing",!1)}}}const h={props:t,emit:l,paymentStore:u,processing:s,isDisabled:m,buttonText:y,handlePayment:c,computed:v,get usePaymentStore(){return P}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},ee=["disabled"],te={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"};function re(b,r,x,t,l,u){return o(),a("button",{onClick:t.handlePayment,disabled:t.isDisabled,class:T(["inline-flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-200",t.isDisabled?"bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-gray-700 dark:text-gray-500":"bg-brand-600 text-white hover:bg-brand-700 dark:bg-brand-500 dark:hover:bg-brand-600",x.buttonClass])},[n(" Loading Spinner "),t.processing?(o(),a("svg",te,[...r[0]||(r[0]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(o(),a(R,{key:1},[n(" Credit Card Icon "),r[1]||(r[1]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1))],2112)),e("span",null,i(t.buttonText),1)],10,ee)}const ne=z($,[["render",re],["__file","/home/btafoya/projects/openclient/resources/js/src/components/payments/PaymentButton.vue"]]),oe={__name:"PaymentStatus",props:{status:{type:String,required:!0}},setup(b,{expose:r}){r();const x=b,t=P(),l=v(()=>t.getStatusDisplay(x.status)),u=v(()=>l.value.label),s=v(()=>{const C={yellow:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400",blue:"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400",green:"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400",red:"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400",gray:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"};return C[l.value.color]||C.gray}),m={render(){return f("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])}},y={render(){return f("svg",{fill:"none",viewBox:"0 0 24 24",class:"animate-spin"},[f("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),f("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])}},c={render(){return f("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])}},h={render(){return f("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])}},p={render(){return f("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})])}},_={render(){return f("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})])}},D=v(()=>({pending:m,processing:y,succeeded:c,failed:h,refunded:p,cancelled:_})[x.status]||m),S={props:x,paymentStore:t,statusDisplay:l,statusLabel:u,statusClasses:s,PendingIcon:m,ProcessingIcon:y,SuccessIcon:c,FailedIcon:h,RefundedIcon:p,CancelledIcon:_,statusIcon:D,computed:v,h:f,get usePaymentStore(){return P}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}};function ae(b,r,x,t,l,u){return o(),a("div",{class:T(["inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded-full",t.statusClasses])},[n(" Status Icon "),(o(),A(X(t.statusIcon),{class:"w-3.5 h-3.5"})),e("span",null,i(t.statusLabel),1)],2)}const se=z(oe,[["render",ae],["__file","/home/btafoya/projects/openclient/resources/js/src/components/payments/PaymentStatus.vue"]]),ie={__name:"PaymentHistory",props:{invoiceId:{type:String,required:!0}},emits:["refunded"],setup(b,{expose:r,emit:x}){r();const t=b,l=x,u=P(),s=w(!0),m=w([]),y=w(null);async function c(){s.value=!0;try{m.value=await u.fetchPaymentsByInvoice(t.invoiceId)}catch(d){console.error("Failed to load payments:",d)}finally{s.value=!1}}function h(d){return d.status==="succeeded"}async function p(d){if(confirm("Are you sure you want to refund this payment?")){y.value=d.id;try{await u.refundPayment(d.id),await c(),l("refunded",d)}catch(I){alert("Failed to process refund: "+(I.message||"Unknown error"))}finally{y.value=null}}}function _(d,I="USD"){return u.formatCurrency(d,I)}function D(d){return d?new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—"}function S(d){if(!d)return"";if(typeof d=="string")try{d=JSON.parse(d)}catch{return""}return d.type==="card"&&d.brand&&d.last4?`${d.brand.charAt(0).toUpperCase()+d.brand.slice(1)} •••• ${d.last4}`:""}function C(d){return{requested_by_customer:"Requested by customer",duplicate:"Duplicate payment",fraudulent:"Fraudulent payment"}[d]||d}H(()=>{c()});const F={props:t,emit:l,paymentStore:u,loading:s,payments:m,refunding:y,loadPayments:c,canRefund:h,handleRefund:p,formatCurrency:_,formatDateTime:D,formatPaymentMethod:S,formatRefundReason:C,ref:w,onMounted:H,get usePaymentStore(){return P},PaymentStatus:se};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}},de={class:"space-y-4"},le={key:0,class:"flex items-center justify-center py-8"},ce={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},ue={key:2,class:"space-y-3"},ye={class:"flex items-start justify-between"},ge={class:"space-y-1"},me={class:"flex items-center gap-2"},xe={class:"font-medium text-gray-900 dark:text-white"},fe={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ve={class:"text-xs text-gray-400 dark:text-gray-500"},ke={key:0,class:"ml-4"},be=["onClick","disabled"],he={key:0,class:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700"},pe={class:"text-sm text-gray-600 dark:text-gray-400"},_e={key:0,class:"text-gray-400"},we={key:1,class:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700"},Pe={class:"text-sm text-red-600 dark:text-red-400"};function Ce(b,r,x,t,l,u){return o(),a("div",de,[t.loading?(o(),a("div",le,[...r[0]||(r[0]=[e("div",{class:"inline-block w-6 h-6 border-2 border-brand-500 border-t-transparent rounded-full animate-spin"},null,-1)])])):t.payments.length===0?(o(),a("div",ce,[...r[1]||(r[1]=[e("svg",{class:"mx-auto w-12 h-12 text-gray-400 dark:text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1),e("p",null,"No payments found",-1)])])):(o(),a("div",ue,[(o(!0),a(R,null,O(t.payments,s=>(o(),a("div",{key:s.id,class:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800/50"},[e("div",ye,[e("div",ge,[e("div",me,[e("span",xe,i(t.formatCurrency(s.amount,s.currency)),1),j(t.PaymentStatus,{status:s.status},null,8,["status"])]),s.payment_method_details?(o(),a("p",fe,i(t.formatPaymentMethod(s.payment_method_details)),1)):n("v-if",!0),e("p",ve,i(t.formatDateTime(s.created_at)),1)]),t.canRefund(s)?(o(),a("div",ke,[e("button",{onClick:m=>t.handleRefund(s),disabled:t.refunding===s.id,class:"text-xs text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},i(t.refunding===s.id?"Processing...":"Refund"),9,be)])):n("v-if",!0)]),n(" Refund info if refunded "),s.status==="refunded"&&s.refund_amount?(o(),a("div",he,[e("p",pe,[r[2]||(r[2]=e("span",{class:"font-medium"},"Refunded:",-1)),k(" "+i(t.formatCurrency(s.refund_amount,s.currency))+" ",1),s.refund_reason?(o(),a("span",_e," — "+i(t.formatRefundReason(s.refund_reason)),1)):n("v-if",!0)])])):n("v-if",!0),n(" Failure info if failed "),s.status==="failed"&&s.failure_message?(o(),a("div",we,[e("p",Pe,[r[3]||(r[3]=e("span",{class:"font-medium"},"Failed:",-1)),k(" "+i(s.failure_message),1)])])):n("v-if",!0)]))),128))]))])}const Se=z(ie,[["render",Ce],["__file","/home/btafoya/projects/openclient/resources/js/src/components/payments/PaymentHistory.vue"]]),Ie={__name:"InvoiceView",setup(b,{expose:r}){r();const x=N(),t=V(),l=E(),u=P(),s=w(!0),m=w(null),y=w(null),c=v(()=>l.currentInvoice),h=v(()=>!c.value||c.value.status==="paid"||c.value.status==="cancelled"||!c.value.due_date?!1:new Date(c.value.due_date)<new Date),p=v(()=>c.value?["sent","viewed","overdue"].includes(c.value.status)&&u.isStripeConfigured:!1);async function _(){var g,M;s.value=!0,m.value=null;try{await l.fetchInvoice(x.params.id)}catch(W){m.value=((M=(g=W.response)==null?void 0:g.data)==null?void 0:M.error)||"Failed to load invoice"}finally{s.value=!1}}async function D(){if(confirm("Send this invoice to the client?"))try{await l.sendInvoice(c.value.id)}catch{alert("Failed to send invoice. Please try again.")}}async function S(){if(confirm("Resend this invoice to the client?"))try{await l.resendInvoice(c.value.id),alert("Invoice resent successfully")}catch{alert("Failed to resend invoice. Please try again.")}}async function C(){if(confirm("Mark this invoice as paid?"))try{await l.markPaid(c.value.id)}catch{alert("Failed to mark as paid. Please try again.")}}async function F(){if(confirm("Are you sure you want to cancel this invoice? This action cannot be undone."))try{await l.updateStatus(c.value.id,"cancelled")}catch{alert("Failed to cancel invoice. Please try again.")}}async function d(){try{await l.previewPdf(c.value.id)}catch{alert("Failed to preview PDF. Please try again.")}}async function I(){try{await l.downloadPdf(c.value.id)}catch{alert("Failed to download PDF. Please try again.")}}function U(g){return Number(g||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function q(g){return g?new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"—"}function Q(g){return g?new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—"}function G(g){const M={draft:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400",sent:"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400",viewed:"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400",paid:"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400",overdue:"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400",cancelled:"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-500"};return M[g]||M.draft}function J(g){y.value=g,setTimeout(()=>{y.value=null},5e3)}function K(){_()}H(async()=>{await Promise.all([u.fetchStripeConfig(),_()])});const L={route:x,router:t,invoiceStore:l,paymentStore:u,loading:s,error:m,paymentError:y,invoice:c,isOverdue:h,canPay:p,loadInvoice:_,sendInvoice:D,resendInvoice:S,markAsPaid:C,cancelInvoice:F,previewPdf:d,downloadPdf:I,formatCurrency:U,formatDate:q,formatDateTime:Q,getStatusClasses:G,handlePaymentError:J,handlePaymentRefunded:K,ref:w,computed:v,onMounted:H,get useRoute(){return N},get useRouter(){return V},get useInvoiceStore(){return E},get usePaymentStore(){return P},AdminLayout:Z,get PaymentButton(){return ne},get PaymentHistory(){return Se}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}},je={class:"space-y-6"},De={key:0,class:"flex items-center justify-center py-12"},Me={class:"p-8 text-center"},Be={class:"mt-4 text-sm text-gray-900 dark:text-white font-medium"},Re={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Fe={class:"flex items-center gap-3"},Te={class:"text-2xl font-bold text-gray-900 dark:text-white"},He={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},ze={class:"flex flex-wrap gap-2"},Ae={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Le={class:"lg:col-span-2 space-y-6"},Ne={class:"rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03] p-6"},Ve={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Ee={class:"text-gray-900 dark:text-white font-medium"},Oe={key:0,class:"text-sm text-gray-600 dark:text-gray-400 whitespace-pre-line"},Ue={key:1,class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},qe={key:0},Qe={class:"text-gray-900 dark:text-white"},Ge={key:0,class:"text-sm font-normal"},Je={class:"rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03] overflow-hidden"},Ke={class:"min-w-full"},We={class:"divide-y divide-gray-200 dark:divide-gray-700"},Xe={class:"px-6 py-4"},Ye={class:"text-gray-900 dark:text-white"},Ze={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},$e={class:"px-6 py-4 text-right text-gray-600 dark:text-gray-400"},et={class:"px-6 py-4 text-right text-gray-600 dark:text-gray-400"},tt={class:"px-6 py-4 text-right font-medium text-gray-900 dark:text-white"},rt={key:0},nt={class:"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-800/50"},ot={class:"flex flex-col items-end space-y-2"},at={class:"flex justify-between w-64"},st={class:"text-gray-900 dark:text-white"},it={key:0,class:"flex justify-between w-64"},dt={class:"text-red-600"},lt={key:1,class:"flex justify-between w-64"},ct={class:"text-gray-600 dark:text-gray-400"},ut={class:"text-gray-900 dark:text-white"},yt={class:"flex justify-between w-64 pt-2 border-t border-gray-200 dark:border-gray-700"},gt={class:"text-lg font-bold text-gray-900 dark:text-white"},mt={key:0,class:"rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03] p-6"},xt={class:"text-gray-600 dark:text-gray-400 whitespace-pre-line"},ft={key:1,class:"rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03] p-6"},vt={class:"text-gray-600 dark:text-gray-400 whitespace-pre-line"},kt={class:"space-y-6"},bt={key:0,class:"p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"},ht={class:"flex items-start gap-3"},pt={class:"text-sm text-red-700 dark:text-red-300"},_t={class:"rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03] p-6"},wt={class:"space-y-4"},Pt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Ct={key:0},St={class:"text-gray-900 dark:text-white"},It={key:1},jt={class:"text-gray-900 dark:text-white capitalize"},Dt={key:2,class:"pt-4 border-t border-gray-200 dark:border-gray-700"},Mt={key:1,class:"rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03] p-6"},Bt={class:"rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03] p-6"},Rt={class:"space-y-4"},Ft={class:"flex items-start gap-3"},Tt={class:"text-xs text-gray-500 dark:text-gray-400"},Ht={key:0,class:"flex items-start gap-3"},zt={class:"text-xs text-gray-500 dark:text-gray-400"},At={key:1,class:"flex items-start gap-3"},Lt={class:"text-xs text-gray-500 dark:text-gray-400"},Nt={key:2,class:"flex items-start gap-3"},Vt={class:"text-xs text-gray-500 dark:text-gray-400"},Et={class:"rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03] p-6"},Ot={class:"space-y-2"};function Ut(b,r,x,t,l,u){const s=Y("router-link");return o(),A(t.AdminLayout,null,{default:B(()=>{var m;return[e("div",je,[n(" Loading State "),t.loading?(o(),a("div",De,[...r[0]||(r[0]=[e("div",{class:"inline-block w-8 h-8 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"},null,-1)])])):t.error?(o(),a(R,{key:1},[n(" Error State "),e("div",Me,[r[2]||(r[2]=e("div",{class:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20"},[e("svg",{class:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e("p",Be,i(t.error),1),j(s,{to:"/invoices",class:"mt-4 inline-block px-4 py-2 text-sm font-medium text-brand-600 hover:text-brand-700"},{default:B(()=>[...r[1]||(r[1]=[k(" Back to Invoices ",-1)])]),_:1})])],2112)):t.invoice?(o(),a(R,{key:2},[n(" Invoice Content "),n(" Page Header "),e("div",Re,[e("div",null,[e("div",Fe,[j(s,{to:"/invoices",class:"p-1.5 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"},{default:B(()=>[...r[3]||(r[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),e("h1",Te,i(t.invoice.invoice_number),1),e("span",{class:T(["inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded-full capitalize",t.getStatusClasses(t.invoice.status)])},i(t.invoice.status),3)]),e("p",He," Created "+i(t.formatDate(t.invoice.created_at)),1)]),e("div",ze,[e("button",{onClick:t.previewPdf,class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600"},[...r[4]||(r[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),k(" Preview ",-1)])]),e("button",{onClick:t.downloadPdf,class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600"},[...r[5]||(r[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),k(" Download PDF ",-1)])]),t.invoice.status==="draft"?(o(),a("button",{key:0,onClick:t.sendInvoice,class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700"},[...r[6]||(r[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),k(" Send Invoice ",-1)])])):n("v-if",!0),["sent","viewed","overdue"].includes(t.invoice.status)?(o(),a("button",{key:1,onClick:t.markAsPaid,class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-brand-600 rounded-lg hover:bg-brand-700"},[...r[7]||(r[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),k(" Mark as Paid ",-1)])])):n("v-if",!0),t.invoice.status==="draft"?(o(),A(s,{key:2,to:`/invoices/${t.invoice.id}/edit`,class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-brand-600 rounded-lg hover:bg-brand-700"},{default:B(()=>[...r[8]||(r[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),k(" Edit ",-1)])]),_:1},8,["to"])):n("v-if",!0)])]),n(" Invoice Details Grid "),e("div",Ae,[n(" Main Invoice Details "),e("div",Le,[n(" Client & Project Info "),e("div",Ne,[r[13]||(r[13]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Invoice Details",-1)),e("div",Ve,[n(" Bill To "),e("div",null,[r[9]||(r[9]=e("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Bill To",-1)),e("p",Ee,i(t.invoice.client_name||"No client"),1),t.invoice.client_address?(o(),a("p",Oe,i(t.invoice.client_address),1)):n("v-if",!0),t.invoice.client_email?(o(),a("p",Ue,i(t.invoice.client_email),1)):n("v-if",!0)]),n(" Project "),t.invoice.project_name?(o(),a("div",qe,[r[10]||(r[10]=e("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Project",-1)),j(s,{to:`/projects/${t.invoice.project_id}`,class:"text-brand-600 hover:text-brand-700 font-medium"},{default:B(()=>[k(i(t.invoice.project_name),1)]),_:1},8,["to"])])):n("v-if",!0),n(" Invoice Date "),e("div",null,[r[11]||(r[11]=e("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Invoice Date",-1)),e("p",Qe,i(t.formatDate(t.invoice.invoice_date)),1)]),n(" Due Date "),e("div",null,[r[12]||(r[12]=e("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Due Date",-1)),e("p",{class:T(["font-medium",t.isOverdue?"text-red-600":"text-gray-900 dark:text-white"])},[k(i(t.formatDate(t.invoice.due_date))+" ",1),t.isOverdue?(o(),a("span",Ge,"(Overdue)")):n("v-if",!0)],2)])])]),n(" Line Items "),e("div",Je,[r[19]||(r[19]=e("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Line Items")],-1)),e("table",Ke,[r[15]||(r[15]=e("thead",null,[e("tr",{class:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400"},"Description"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400"},"Qty"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400"},"Rate"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400"},"Amount")])],-1)),e("tbody",We,[(o(!0),a(R,null,O(t.invoice.line_items||[],y=>(o(),a("tr",{key:y.id},[e("td",Xe,[e("p",Ye,i(y.description),1),y.notes?(o(),a("p",Ze,i(y.notes),1)):n("v-if",!0)]),e("td",$e,i(y.quantity),1),e("td",et," $"+i(t.formatCurrency(y.rate)),1),e("td",tt," $"+i(t.formatCurrency(y.amount)),1)]))),128)),(m=t.invoice.line_items)!=null&&m.length?n("v-if",!0):(o(),a("tr",rt,[...r[14]||(r[14]=[e("td",{colspan:"4",class:"px-6 py-8 text-center text-gray-500 dark:text-gray-400"}," No line items ",-1)])]))])]),n(" Totals "),e("div",nt,[e("div",ot,[e("div",at,[r[16]||(r[16]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Subtotal",-1)),e("span",st,"$"+i(t.formatCurrency(t.invoice.subtotal)),1)]),t.invoice.discount>0?(o(),a("div",it,[r[17]||(r[17]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Discount",-1)),e("span",dt,"-$"+i(t.formatCurrency(t.invoice.discount)),1)])):n("v-if",!0),t.invoice.tax>0?(o(),a("div",lt,[e("span",ct,"Tax ("+i(t.invoice.tax_rate||0)+"%)",1),e("span",ut,"$"+i(t.formatCurrency(t.invoice.tax)),1)])):n("v-if",!0),e("div",yt,[r[18]||(r[18]=e("span",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Total",-1)),e("span",gt,"$"+i(t.formatCurrency(t.invoice.total)),1)])])])]),n(" Notes "),t.invoice.notes?(o(),a("div",mt,[r[20]||(r[20]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Notes",-1)),e("p",xt,i(t.invoice.notes),1)])):n("v-if",!0),n(" Terms "),t.invoice.terms?(o(),a("div",ft,[r[21]||(r[21]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Terms & Conditions",-1)),e("p",vt,i(t.invoice.terms),1)])):n("v-if",!0)]),n(" Sidebar "),e("div",kt,[n(" Payment Error Alert "),t.paymentError?(o(),a("div",bt,[e("div",ht,[r[22]||(r[22]=e("svg",{class:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",pt,i(t.paymentError),1)])])):n("v-if",!0),n(" Payment Info "),e("div",_t,[r[26]||(r[26]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Payment Information",-1)),e("div",wt,[e("div",null,[r[23]||(r[23]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Amount Due",-1)),e("p",Pt,"$"+i(t.formatCurrency(t.invoice.total)),1)]),t.invoice.paid_at?(o(),a("div",Ct,[r[24]||(r[24]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Paid On",-1)),e("p",St,i(t.formatDate(t.invoice.paid_at)),1)])):n("v-if",!0),t.invoice.payment_method?(o(),a("div",It,[r[25]||(r[25]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Payment Method",-1)),e("p",jt,i(t.invoice.payment_method),1)])):n("v-if",!0),n(" Pay Now Button "),t.canPay?(o(),a("div",Dt,[j(t.PaymentButton,{"invoice-id":t.invoice.id,amount:Number(t.invoice.total),currency:t.invoice.currency||"USD",label:"Pay Now","button-class":"w-full justify-center",onError:t.handlePaymentError},null,8,["invoice-id","amount","currency"])])):n("v-if",!0)])]),n(" Payment History "),t.invoice.status!=="draft"?(o(),a("div",Mt,[r[27]||(r[27]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Payment History",-1)),j(t.PaymentHistory,{"invoice-id":t.invoice.id,onRefunded:t.handlePaymentRefunded},null,8,["invoice-id"])])):n("v-if",!0),n(" Status History "),e("div",Bt,[r[36]||(r[36]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Activity",-1)),e("div",Rt,[e("div",Ft,[r[29]||(r[29]=e("div",{class:"w-2 h-2 mt-2 rounded-full bg-green-500"},null,-1)),e("div",null,[r[28]||(r[28]=e("p",{class:"text-sm text-gray-900 dark:text-white"},"Invoice Created",-1)),e("p",Tt,i(t.formatDateTime(t.invoice.created_at)),1)])]),t.invoice.sent_at?(o(),a("div",Ht,[r[31]||(r[31]=e("div",{class:"w-2 h-2 mt-2 rounded-full bg-blue-500"},null,-1)),e("div",null,[r[30]||(r[30]=e("p",{class:"text-sm text-gray-900 dark:text-white"},"Invoice Sent",-1)),e("p",zt,i(t.formatDateTime(t.invoice.sent_at)),1)])])):n("v-if",!0),t.invoice.viewed_at?(o(),a("div",At,[r[33]||(r[33]=e("div",{class:"w-2 h-2 mt-2 rounded-full bg-purple-500"},null,-1)),e("div",null,[r[32]||(r[32]=e("p",{class:"text-sm text-gray-900 dark:text-white"},"Invoice Viewed",-1)),e("p",Lt,i(t.formatDateTime(t.invoice.viewed_at)),1)])])):n("v-if",!0),t.invoice.paid_at?(o(),a("div",Nt,[r[35]||(r[35]=e("div",{class:"w-2 h-2 mt-2 rounded-full bg-green-500"},null,-1)),e("div",null,[r[34]||(r[34]=e("p",{class:"text-sm text-gray-900 dark:text-white"},"Payment Received",-1)),e("p",Vt,i(t.formatDateTime(t.invoice.paid_at)),1)])])):n("v-if",!0)])]),n(" Quick Actions "),e("div",Et,[r[39]||(r[39]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Quick Actions",-1)),e("div",Ot,[["sent","viewed"].includes(t.invoice.status)?(o(),a("button",{key:0,onClick:t.resendInvoice,class:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"},[...r[37]||(r[37]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),k(" Resend Invoice ",-1)])])):n("v-if",!0),t.invoiceStore.canTransitionTo(t.invoice.status,"cancelled")?(o(),a("button",{key:1,onClick:t.cancelInvoice,class:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-red-700 bg-red-100 rounded-lg hover:bg-red-200 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30"},[...r[38]||(r[38]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),k(" Cancel Invoice ",-1)])])):n("v-if",!0)])])])])],64)):n("v-if",!0)])]}),_:1})}const Wt=z(Ie,[["render",Ut],["__file","/home/btafoya/projects/openclient/resources/js/src/views/Invoices/InvoiceView.vue"]]);export{Wt as default};
