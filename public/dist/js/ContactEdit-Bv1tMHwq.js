import{_ as B,b as E,h as m,i as p,H as _,I as C,r as f,k as x,o as l,e,c as h,d as g,l as R,t as k}from"./main-Dw3b53V2.js";import{u as y}from"./contacts-CtYKUrIi.js";import{A as j}from"./AdminLayout-C6ZnkvFv.js";import{C as F}from"./ContactForm-BG5MMEbz.js";import"./index-B9ygI19o.js";import"./clients-BPZO_sxA.js";const L={__name:"ContactEdit",setup(v,{expose:o}){o();const n=_(),t=C(),c=y(),a=f(null);async function s(){var i,r;try{await c.fetchContact(t.params.id)}catch(d){a.value=((r=(i=d.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to load contact"}}async function b(i){var r,d;a.value=null;try{await c.updateContact(t.params.id,i),n.push(`/crm/contacts/${t.params.id}`)}catch(w){a.value=((d=(r=w.response)==null?void 0:r.data)==null?void 0:d.message)||"Failed to update contact"}}function S(){n.push(`/crm/contacts/${t.params.id}`)}x(()=>s());const u={router:n,route:t,contactStore:c,error:a,loadContact:s,handleSubmit:b,handleCancel:S,ref:f,onMounted:x,get useRouter(){return _},get useRoute(){return C},get useContactStore(){return y},AdminLayout:j,ContactForm:F};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},A={class:"space-y-6"},M={class:"flex items-center gap-4"},N={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},V={key:0,class:"rounded-lg bg-red-50 p-4 dark:bg-red-900/20"},D={class:"text-sm text-red-700 dark:text-red-400"},H={key:1,class:"p-8 text-center"};function I(v,o,n,t,c,a){const s=E("router-link");return l(),m(t.AdminLayout,null,{default:p(()=>[e("div",A,[e("div",M,[R(s,{to:`/crm/contacts/${t.route.params.id}`,class:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},{default:p(()=>[...o[0]||(o[0]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["to"]),e("div",null,[o[1]||(o[1]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Edit Contact",-1)),e("p",N,k(t.contactStore.currentContact?`${t.contactStore.currentContact.first_name} ${t.contactStore.currentContact.last_name}`:"Loading..."),1)])]),t.error?(l(),h("div",V,[e("p",D,k(t.error),1)])):g("v-if",!0),t.contactStore.loading&&!t.contactStore.currentContact?(l(),h("div",H,[...o[2]||(o[2]=[e("div",{class:"inline-block w-8 h-8 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"Loading contact...",-1)])])):t.contactStore.currentContact?(l(),m(t.ContactForm,{key:2,"initial-data":t.contactStore.currentContact,"submit-text":"Update Contact",onSubmit:t.handleSubmit,onCancel:t.handleCancel},null,8,["initial-data"])):g("v-if",!0)])]),_:1})}const J=B(L,[["render",I],["__file","/home/btafoya/projects/openclient/resources/js/src/views/CRM/Contacts/ContactEdit.vue"]]);export{J as default};
