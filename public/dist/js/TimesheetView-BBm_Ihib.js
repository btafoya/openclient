import{_ as ge,h as ce,i as be,r as v,u as U,q as m,k as z,o as c,e,d as l,c as b,n as A,j as D,t as i,w as p,z as E,v as T,F as w,g as C,C as ue,E as ye}from"./main-CeUa7Jrx.js";import{u as Y}from"./timeTracking-vpzvsB0X.js";import{u as q}from"./projects-ITvZMXmG.js";import{A as xe}from"./AdminLayout-B_43-oU8.js";import"./index-B9ygI19o.js";const me={__name:"TimesheetView",setup(W,{expose:t}){t();const k=Y(),r=q(),B=v(!1),P=v(!1),o=v(!1),u=v(null),h=v(null),V=v(!1),j=v("none"),g=U({dateRange:"this_week",startDate:"",endDate:"",projectId:"",billable:""}),y=U({project_id:"",description:"",date:new Date().toISOString().split("T")[0],hours:"",is_billable:!0}),G=m(()=>r.projects),_=m(()=>{let a=[...k.timeEntries];const{start:s,end:n}=I();if(s&&n&&(a=a.filter(d=>{const x=new Date(d.start_time||d.created_at);return x>=s&&x<=n})),g.projectId&&(a=a.filter(d=>d.project_id===g.projectId)),g.billable!==""){const d=g.billable==="true";a=a.filter(x=>x.is_billable===d)}return a.sort((d,x)=>new Date(x.start_time||x.created_at)-new Date(d.start_time||d.created_at)),a}),J=m(()=>{if(j.value==="none")return[];const a={};return _.value.forEach(s=>{let n,d;if(j.value==="date"){const x=new Date(s.start_time||s.created_at);n=x.toISOString().split("T")[0],d=O(x)}else j.value==="project"&&(n=s.project_id||"unknown",d=s.project_name||"Unknown Project");a[n]||(a[n]={key:n,label:d,entries:[],totalHours:0}),a[n].entries.push(s),a[n].totalHours+=parseFloat(s.hours||0)}),Object.values(a).sort((s,n)=>j.value==="date"?n.key.localeCompare(s.key):s.label.localeCompare(n.label))}),S=m(()=>_.value.reduce((a,s)=>a+parseFloat(s.hours||0),0)),H=m(()=>_.value.filter(a=>a.is_billable).reduce((a,s)=>a+parseFloat(s.hours||0),0)),K=m(()=>S.value-H.value),Q=m(()=>S.value===0?0:Math.round(H.value/S.value*100)),X=m(()=>new Set(_.value.map(s=>s.project_id)).size),Z=m(()=>g.projectId||g.billable!==""||g.dateRange==="custom"),$=m(()=>{let a=0;return g.projectId&&a++,g.billable!==""&&a++,g.dateRange==="custom"&&a++,a});function I(){const a=new Date,s=new Date(a.getFullYear(),a.getMonth(),a.getDate());let n,d;switch(g.dateRange){case"today":n=s,d=new Date(s.getTime()+1440*60*1e3-1);break;case"this_week":const x=s.getDay();n=new Date(s.getTime()-x*24*60*60*1e3),d=new Date(n.getTime()+10080*60*1e3-1);break;case"last_week":const F=s.getDay();n=new Date(s.getTime()-(F+7)*24*60*60*1e3),d=new Date(n.getTime()+10080*60*1e3-1);break;case"this_month":n=new Date(a.getFullYear(),a.getMonth(),1),d=new Date(a.getFullYear(),a.getMonth()+1,0,23,59,59);break;case"last_month":n=new Date(a.getFullYear(),a.getMonth()-1,1),d=new Date(a.getFullYear(),a.getMonth(),0,23,59,59);break;case"custom":g.startDate&&(n=new Date(g.startDate)),g.endDate&&(d=new Date(g.endDate+"T23:59:59"));break;default:n=null,d=null}return{start:n,end:d}}function ee(){g.dateRange!=="custom"&&(g.startDate="",g.endDate="")}function te(){g.dateRange="this_week",g.startDate="",g.endDate="",g.projectId="",g.billable=""}function re(){P.value=!1,R()}async function R(){B.value=!0;try{await Promise.all([k.fetchTimeEntries(),r.fetchProjects()])}catch(a){console.error("Failed to load data:",a)}finally{B.value=!1}}function ae(a){if(!a)return"—";const s=new Date(a);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}).format(s)}function O(a){const s=new Date;s.setHours(0,0,0,0);const n=new Date(s.getTime()-1440*60*1e3),d=new Date(a);return d.setHours(0,0,0,0),d.getTime()===s.getTime()?"Today":d.getTime()===n.getTime()?"Yesterday":new Intl.DateTimeFormat("en-US",{weekday:"long",month:"short",day:"numeric"}).format(a)}async function oe(a){try{await k.toggleBillable(a.id)}catch(s){console.error("Failed to toggle billable:",s)}}function se(a){var s;u.value=a,y.project_id=a.project_id||"",y.description=a.description||"",y.date=((s=a.start_time||a.created_at)==null?void 0:s.split("T")[0])||new Date().toISOString().split("T")[0],y.hours=a.hours,y.is_billable=a.is_billable}function le(a){h.value=a}async function ne(){if(h.value)try{await k.deleteTimeEntry(h.value.id),h.value=null}catch(a){console.error("Failed to delete entry:",a)}}function L(){o.value=!1,u.value=null,y.project_id="",y.description="",y.date=new Date().toISOString().split("T")[0],y.hours="",y.is_billable=!0}async function de(){V.value=!0;try{const a={project_id:y.project_id,description:y.description||null,hours:parseFloat(y.hours),start_time:y.date+"T09:00:00",is_billable:y.is_billable};u.value?await k.updateTimeEntry(u.value.id,a):await k.createTimeEntry(a),L()}catch(a){console.error("Failed to save entry:",a)}finally{V.value=!1}}function ie(){const a=["Date","Project","Task","Description","Hours","Billable"],s=_.value.map(f=>{var M;return[((M=f.start_time||f.created_at)==null?void 0:M.split("T")[0])||"",f.project_name||"",f.task_title||"",f.description||"",parseFloat(f.hours).toFixed(2),f.is_billable?"Yes":"No"]}),n=[a,...s].map(f=>f.map(M=>`"${M}"`).join(",")).join(`
`),d=new Blob([n],{type:"text/csv"}),x=URL.createObjectURL(d),F=document.createElement("a");F.href=x,F.download=`timesheet-${new Date().toISOString().split("T")[0]}.csv`,F.click(),URL.revokeObjectURL(x)}z(()=>{R()});const N={timeStore:k,projectStore:r,loading:B,showFilters:P,showManualEntry:o,editingEntry:u,deletingEntry:h,savingEntry:V,groupBy:j,filters:g,entryForm:y,projects:G,filteredEntries:_,groupedEntries:J,totalHours:S,billableHours:H,nonBillableHours:K,billablePercentage:Q,uniqueProjects:X,hasActiveFilters:Z,activeFilterCount:$,getDateRange:I,handleDateRangeChange:ee,clearFilters:te,applyFilters:re,loadData:R,formatDate:ae,formatDateLabel:O,toggleBillable:oe,editEntry:se,confirmDeleteEntry:le,deleteEntry:ne,closeEntryModal:L,saveEntry:de,exportTimesheet:ie,ref:v,reactive:U,computed:m,onMounted:z,get useTimeTrackingStore(){return Y},get useProjectStore(){return q},AdminLayout:xe};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}},pe={class:"mx-auto max-w-7xl"},fe={class:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ke={class:"flex gap-3"},he={key:0,class:"ml-1 rounded-full bg-brand-600 px-1.5 py-0.5 text-xs text-white"},ve={key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-800 dark:bg-gray-900"},we={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},_e={key:0,class:"flex gap-2"},De={class:"flex-1"},je={class:"flex-1"},Fe=["value"],Ee={class:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},Te={class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-800 dark:bg-gray-900"},Ce={class:"mt-1 text-3xl font-bold text-gray-900 dark:text-white"},Be={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Se={class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-800 dark:bg-gray-900"},Me={class:"mt-1 text-3xl font-bold text-green-600 dark:text-green-400"},Pe={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Ve={class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-800 dark:bg-gray-900"},He={class:"mt-1 text-3xl font-bold text-gray-600 dark:text-gray-400"},Re={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Ue={class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-800 dark:bg-gray-900"},Ae={class:"mt-1 text-3xl font-bold text-brand-600 dark:text-brand-400"},Ie={class:"rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-800 dark:bg-gray-900"},Oe={class:"border-b border-gray-200 px-6 py-4 dark:border-gray-800"},Le={class:"flex items-center justify-between"},Ne={class:"flex items-center gap-3"},ze={class:"flex items-center gap-2 text-sm"},Ye={key:0,class:"flex items-center justify-center py-12"},qe={class:"flex items-center justify-between bg-gray-50 px-6 py-3 dark:bg-gray-800/50"},We={class:"flex items-center gap-3"},Ge={class:"font-medium text-gray-900 dark:text-white"},Je={class:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-medium text-gray-700 dark:bg-gray-700 dark:text-gray-300"},Ke={class:"font-semibold text-gray-900 dark:text-white"},Qe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Xe={class:"divide-y divide-gray-200 dark:divide-gray-700"},Ze={class:"whitespace-nowrap px-6 py-4"},$e={class:"text-sm font-medium text-gray-900 dark:text-white"},et={key:0,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},tt={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},rt={key:0,class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},at={class:"whitespace-nowrap px-6 py-4"},ot={class:"text-sm font-medium text-gray-900 dark:text-white"},st={class:"whitespace-nowrap px-6 py-4"},lt=["onClick"],nt={class:"whitespace-nowrap px-6 py-4 text-right text-sm"},dt=["onClick"],it=["onClick"],gt={class:"overflow-x-auto"},ct={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},bt={class:"divide-y divide-gray-200 dark:divide-gray-700"},ut={class:"whitespace-nowrap px-6 py-4"},yt={class:"text-sm font-medium text-gray-900 dark:text-white"},xt={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},mt={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},pt={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},ft={class:"whitespace-nowrap px-6 py-4"},kt={class:"text-sm font-medium text-gray-900 dark:text-white"},ht={class:"whitespace-nowrap px-6 py-4"},vt=["onClick"],wt={class:"whitespace-nowrap px-6 py-4 text-right text-sm"},_t=["onClick"],Dt=["onClick"],jt={class:"py-12 text-center"},Ft={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Et={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"},Tt={class:"w-full max-w-md rounded-lg bg-white p-6 shadow-xl dark:bg-gray-900"},Ct={class:"mb-4 text-lg font-semibold text-gray-900 dark:text-white"},Bt={class:"mb-4"},St=["value"],Mt={class:"mb-4"},Pt={class:"mb-4 grid grid-cols-2 gap-4"},Vt={class:"mb-4"},Ht={class:"flex items-center gap-2"},Rt={class:"flex justify-end gap-3"},Ut=["disabled"],At={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},It={class:"mx-4 w-full max-w-md rounded-lg bg-white p-6 shadow-xl dark:bg-gray-900"},Ot={class:"mt-4 flex justify-end gap-3"};function Lt(W,t,k,r,B,P){return c(),ce(r.AdminLayout,null,{default:be(()=>[e("div",pe,[l(" Header "),e("div",fe,[t[18]||(t[18]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Timesheet"),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," View and manage all time entries across projects ")],-1)),e("div",ke,[e("button",{onClick:t[0]||(t[0]=o=>r.showFilters=!r.showFilters),class:A(["inline-flex items-center gap-2 rounded-lg border px-4 py-2 text-sm font-medium transition-colors",r.showFilters||r.hasActiveFilters?"border-brand-600 bg-brand-50 text-brand-700 dark:border-brand-500 dark:bg-brand-900/20 dark:text-brand-400":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"])},[t[14]||(t[14]=e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)),t[15]||(t[15]=D(" Filters ",-1)),r.hasActiveFilters?(c(),b("span",he,i(r.activeFilterCount),1)):l("v-if",!0)],2),e("button",{onClick:r.exportTimesheet,class:"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"},[...t[16]||(t[16]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),D(" Export ",-1)])]),e("button",{onClick:t[1]||(t[1]=o=>r.showManualEntry=!0),class:"inline-flex items-center gap-2 rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white hover:bg-brand-700 dark:bg-brand-500 dark:hover:bg-brand-600"},[...t[17]||(t[17]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),D(" Add Entry ",-1)])])])]),l(" Filters Panel "),r.showFilters?(c(),b("div",ve,[e("div",we,[l(" Date Range "),e("div",null,[t[20]||(t[20]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Date Range ",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.filters.dateRange=o),onChange:r.handleDateRangeChange,class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},[...t[19]||(t[19]=[e("option",{value:"today"},"Today",-1),e("option",{value:"this_week"},"This Week",-1),e("option",{value:"last_week"},"Last Week",-1),e("option",{value:"this_month"},"This Month",-1),e("option",{value:"last_month"},"Last Month",-1),e("option",{value:"custom"},"Custom Range",-1)])],544),[[E,r.filters.dateRange]])]),l(" Custom Date Range "),r.filters.dateRange==="custom"?(c(),b("div",_e,[e("div",De,[t[21]||(t[21]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," From ",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>r.filters.startDate=o),type:"date",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},null,512),[[T,r.filters.startDate]])]),e("div",je,[t[22]||(t[22]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," To ",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>r.filters.endDate=o),type:"date",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},null,512),[[T,r.filters.endDate]])])])):l("v-if",!0),l(" Project Filter "),e("div",null,[t[24]||(t[24]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Project ",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>r.filters.projectId=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},[t[23]||(t[23]=e("option",{value:""},"All Projects",-1)),(c(!0),b(w,null,C(r.projects,o=>(c(),b("option",{key:o.id,value:o.id},i(o.name),9,Fe))),128))],512),[[E,r.filters.projectId]])]),l(" Billable Filter "),e("div",null,[t[26]||(t[26]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Billable Status ",-1)),p(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>r.filters.billable=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},[...t[25]||(t[25]=[e("option",{value:""},"All Entries",-1),e("option",{value:"true"},"Billable Only",-1),e("option",{value:"false"},"Non-Billable Only",-1)])],512),[[E,r.filters.billable]])])]),e("div",{class:"mt-4 flex justify-end gap-3"},[e("button",{onClick:r.clearFilters,class:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800"}," Clear Filters "),e("button",{onClick:r.applyFilters,class:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white hover:bg-brand-700 dark:bg-brand-500 dark:hover:bg-brand-600"}," Apply Filters ")])])):l("v-if",!0),l(" Summary Cards "),e("div",Ee,[e("div",Te,[t[27]||(t[27]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Hours",-1)),e("p",Ce,i(r.totalHours.toFixed(2))+"h ",1),e("p",Be,i(r.filteredEntries.length)+" entries ",1)]),e("div",Se,[t[28]||(t[28]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Billable Hours",-1)),e("p",Me,i(r.billableHours.toFixed(2))+"h ",1),e("p",Pe,i(r.billablePercentage)+"% of total ",1)]),e("div",Ve,[t[29]||(t[29]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Non-Billable Hours",-1)),e("p",He,i(r.nonBillableHours.toFixed(2))+"h ",1),e("p",Re,i(100-r.billablePercentage)+"% of total ",1)]),e("div",Ue,[t[30]||(t[30]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Projects Worked",-1)),e("p",Ae,i(r.uniqueProjects),1),t[31]||(t[31]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," in selected period ",-1))])]),l(" Time Entries Table "),e("div",Ie,[l(" Table Header "),e("div",Oe,[e("div",Le,[t[34]||(t[34]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Time Entries",-1)),e("div",Ne,[e("label",ze,[t[33]||(t[33]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Group by:",-1)),p(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>r.groupBy=o),class:"rounded-lg border border-gray-300 px-3 py-1.5 text-sm focus:border-brand-500 focus:outline-none dark:border-gray-700 dark:bg-gray-800 dark:text-white"},[...t[32]||(t[32]=[e("option",{value:"none"},"None",-1),e("option",{value:"date"},"Date",-1),e("option",{value:"project"},"Project",-1)])],512),[[E,r.groupBy]])])])])]),l(" Loading State "),r.loading?(c(),b("div",Ye,[...t[35]||(t[35]=[e("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-gray-300 border-t-brand-600 dark:border-gray-700 dark:border-t-brand-500"},null,-1)])])):r.groupBy!=="none"&&r.groupedEntries.length>0?(c(),b(w,{key:1},[l(" Grouped View "),e("div",null,[(c(!0),b(w,null,C(r.groupedEntries,o=>(c(),b("div",{key:o.key,class:"border-b border-gray-200 last:border-b-0 dark:border-gray-800"},[l(" Group Header "),e("div",qe,[e("div",We,[e("h3",Ge,i(o.label),1),e("span",Je,i(o.entries.length)+" entries ",1)]),e("span",Ke,i(o.totalHours.toFixed(2))+"h ",1)]),l(" Group Entries "),e("table",Qe,[e("tbody",Xe,[(c(!0),b(w,null,C(o.entries,u=>(c(),b("tr",{key:u.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800/50"},[e("td",Ze,[e("div",$e,i(u.description||"No description"),1),r.groupBy!=="project"?(c(),b("div",et,i(u.project_name||"Unknown Project"),1)):l("v-if",!0)]),e("td",tt,i(u.task_title||"—"),1),r.groupBy!=="date"?(c(),b("td",rt,i(r.formatDate(u.start_time||u.created_at)),1)):l("v-if",!0),e("td",at,[e("span",ot,i(parseFloat(u.hours).toFixed(2))+"h ",1)]),e("td",st,[e("button",{onClick:h=>r.toggleBillable(u),class:A(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium transition-colors",u.is_billable?"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400"])},i(u.is_billable?"Billable":"Non-billable"),11,lt)]),e("td",nt,[e("button",{onClick:h=>r.editEntry(u),class:"mr-3 text-brand-600 hover:text-brand-800 dark:text-brand-400"}," Edit ",8,dt),e("button",{onClick:h=>r.confirmDeleteEntry(u),class:"text-red-600 hover:text-red-800 dark:text-red-400"}," Delete ",8,it)])]))),128))])])]))),128))])],2112)):r.filteredEntries.length>0?(c(),b(w,{key:2},[l(" Flat View "),e("div",gt,[e("table",ct,[t[36]||(t[36]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Description "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Project "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Task "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Date "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Hours "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Billable "),e("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Actions ")])],-1)),e("tbody",bt,[(c(!0),b(w,null,C(r.filteredEntries,o=>(c(),b("tr",{key:o.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800/50"},[e("td",ut,[e("div",yt,i(o.description||"No description"),1)]),e("td",xt,i(o.project_name||"Unknown Project"),1),e("td",mt,i(o.task_title||"—"),1),e("td",pt,i(r.formatDate(o.start_time||o.created_at)),1),e("td",ft,[e("span",kt,i(parseFloat(o.hours).toFixed(2))+"h ",1)]),e("td",ht,[e("button",{onClick:u=>r.toggleBillable(o),class:A(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium transition-colors",o.is_billable?"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400"])},i(o.is_billable?"Billable":"Non-billable"),11,vt)]),e("td",wt,[e("button",{onClick:u=>r.editEntry(o),class:"mr-3 text-brand-600 hover:text-brand-800 dark:text-brand-400"}," Edit ",8,_t),e("button",{onClick:u=>r.confirmDeleteEntry(o),class:"text-red-600 hover:text-red-800 dark:text-red-400"}," Delete ",8,Dt)])]))),128))])])])],2112)):(c(),b(w,{key:3},[l(" Empty State "),e("div",jt,[t[37]||(t[37]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[38]||(t[38]=e("p",{class:"mt-4 text-lg font-medium text-gray-900 dark:text-white"},"No time entries found",-1)),e("p",Ft,i(r.hasActiveFilters?"Try adjusting your filters":"Start tracking time to see entries here"),1),r.hasActiveFilters?(c(),b("button",{key:0,onClick:r.clearFilters,class:"mt-4 inline-flex items-center gap-2 rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800"}," Clear Filters ")):l("v-if",!0)])],2112))]),l(" Manual Entry Modal "),r.showManualEntry||r.editingEntry?(c(),b("div",Et,[e("div",Tt,[e("h3",Ct,i(r.editingEntry?"Edit Time Entry":"Add Time Entry"),1),e("form",{onSubmit:ue(r.saveEntry,["prevent"])},[l(" Project "),e("div",Bt,[t[40]||(t[40]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"},[D(" Project "),e("span",{class:"text-red-500"},"*")],-1)),p(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>r.entryForm.project_id=o),required:"",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},[t[39]||(t[39]=e("option",{value:""},"Select a project",-1)),(c(!0),b(w,null,C(r.projects,o=>(c(),b("option",{key:o.id,value:o.id},i(o.name),9,St))),128))],512),[[E,r.entryForm.project_id]])]),l(" Description "),e("div",Mt,[t[41]||(t[41]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Description ",-1)),p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>r.entryForm.description=o),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white",placeholder:"What did you work on?"},null,512),[[T,r.entryForm.description]])]),l(" Date & Hours "),e("div",Pt,[e("div",null,[t[42]||(t[42]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"},[D(" Date "),e("span",{class:"text-red-500"},"*")],-1)),p(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>r.entryForm.date=o),type:"date",required:"",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},null,512),[[T,r.entryForm.date]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"},[D(" Hours "),e("span",{class:"text-red-500"},"*")],-1)),p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>r.entryForm.hours=o),type:"number",step:"0.25",min:"0.25",required:"",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white",placeholder:"0.00"},null,512),[[T,r.entryForm.hours]])])]),l(" Billable "),e("div",Vt,[e("label",Ht,[p(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>r.entryForm.is_billable=o),type:"checkbox",class:"rounded border-gray-300 text-brand-600 focus:ring-brand-500 dark:border-gray-700"},null,512),[[ye,r.entryForm.is_billable]]),t[44]||(t[44]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Billable",-1))])]),l(" Actions "),e("div",Rt,[e("button",{type:"button",onClick:r.closeEntryModal,class:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800"}," Cancel "),e("button",{type:"submit",disabled:r.savingEntry,class:"inline-flex items-center gap-2 rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white hover:bg-brand-700 disabled:opacity-50"},i(r.savingEntry?"Saving...":"Save Entry"),9,Ut)])],32)])])):l("v-if",!0),l(" Delete Confirmation "),r.deletingEntry?(c(),b("div",At,[e("div",It,[t[45]||(t[45]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Delete Entry",-1)),t[46]||(t[46]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," Are you sure you want to delete this time entry? This action cannot be undone. ",-1)),e("div",Ot,[e("button",{onClick:t[13]||(t[13]=o=>r.deletingEntry=null),class:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800"}," Cancel "),e("button",{onClick:r.deleteEntry,class:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700"}," Delete ")])])])):l("v-if",!0)])]),_:1})}const Gt=ge(me,[["render",Lt],["__file","/home/btafoya/projects/openclient/resources/js/src/views/Projects/TimesheetView.vue"]]);export{Gt as default};
