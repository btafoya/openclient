import{_ as A,b as H,h as p,i as u,r as v,q as _,k as C,o as s,e as t,d as n,c as i,l as f,j as m,t as l,w as S,v as N,z as O,F as k,g as E,n as h}from"./main-Dc7XXzbq.js";import{u as I}from"./invoices-C0QBjOwK.js";import{A as U}from"./AdminLayout-DxqTGoZO.js";import"./index-B9ygI19o.js";const q={__name:"InvoiceList",setup(j,{expose:e}){e();const x=I(),r=v(""),y=v("all"),b=_(()=>{let a=x.filteredInvoices;return y.value!=="all"&&(a=a.filter(d=>d.status===y.value)),a});async function c(){try{await Promise.all([x.fetchInvoices(),x.fetchStats()])}catch(a){console.error("Failed to load invoices:",a)}}function o(){x.setSearchTerm(r.value)}function g(){c()}async function D(a){if(confirm(`Send invoice ${a.invoice_number} to ${a.client_name||"client"}?`))try{await x.sendInvoice(a.id),await c()}catch(d){console.error("Failed to send invoice:",d),alert("Failed to send invoice. Please try again.")}}async function F(a){if(confirm(`Mark invoice ${a.invoice_number} as paid?`))try{await x.markPaid(a.id),await c()}catch(d){console.error("Failed to mark as paid:",d),alert("Failed to mark invoice as paid. Please try again.")}}async function M(a){try{await x.downloadPdf(a.id)}catch(d){console.error("Failed to download PDF:",d),alert("Failed to download PDF. Please try again.")}}async function P(a){if(confirm(`Are you sure you want to delete invoice ${a.invoice_number}? This action cannot be undone.`))try{await x.deleteInvoice(a.id)}catch(d){console.error("Failed to delete invoice:",d),alert("Failed to delete invoice. Please try again.")}}function B(a){return Number(a||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function T(a){return a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"â€”"}function L(a){return a.status==="paid"||a.status==="cancelled"||!a.due_date?!1:new Date(a.due_date)<new Date}function V(a){const d={draft:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400",sent:"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400",viewed:"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400",paid:"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400",overdue:"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400",cancelled:"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-500"};return d[a]||d.draft}function z(a){const d={draft:"bg-gray-600",sent:"bg-blue-600",viewed:"bg-purple-600",paid:"bg-green-600",overdue:"bg-red-600",cancelled:"bg-gray-500"};return d[a]||d.draft}C(()=>{c()});const w={invoiceStore:x,searchTerm:r,statusFilter:y,displayedInvoices:b,loadInvoices:c,handleSearch:o,applyFilter:g,sendInvoice:D,markAsPaid:F,downloadPdf:M,confirmDelete:P,formatCurrency:B,formatDate:T,isOverdue:L,getStatusClasses:V,getStatusDotClasses:z,ref:v,computed:_,onMounted:C,get useInvoiceStore(){return I},AdminLayout:U};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}},G={class:"space-y-6"},Y={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},J={key:0,class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},K={class:"p-4 bg-white rounded-lg border border-gray-200 dark:bg-white/[0.03] dark:border-gray-800"},Q={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-white"},R={class:"p-4 bg-white rounded-lg border border-gray-200 dark:bg-white/[0.03] dark:border-gray-800"},W={class:"mt-1 text-2xl font-bold text-green-600"},X={class:"p-4 bg-white rounded-lg border border-gray-200 dark:bg-white/[0.03] dark:border-gray-800"},Z={class:"mt-1 text-2xl font-bold text-red-600"},$={class:"p-4 bg-white rounded-lg border border-gray-200 dark:bg-white/[0.03] dark:border-gray-800"},tt={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-white"},et={class:"flex flex-col gap-4 sm:flex-row sm:items-center"},rt={class:"flex-1"},at={class:"relative"},ot={class:"flex gap-3"},st={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},nt={key:0,class:"p-8 text-center"},dt={class:"p-8 text-center"},it={class:"mt-4 text-sm text-gray-900 dark:text-white font-medium"},lt={class:"p-8 text-center"},ct={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},xt={class:"max-w-full overflow-x-auto custom-scrollbar"},ut={class:"min-w-full"},gt={class:"divide-y divide-gray-200 dark:divide-gray-700"},mt={class:"px-5 py-4 sm:px-6"},yt={key:0,class:"block text-gray-500 text-theme-xs dark:text-gray-400 mt-0.5"},kt={class:"px-5 py-4 sm:px-6"},pt={class:"text-theme-sm"},vt={key:0,class:"text-gray-700 dark:text-gray-300"},ft={key:1,class:"text-gray-400 dark:text-gray-500 italic"},ht={class:"px-5 py-4 sm:px-6"},bt={class:"px-5 py-4 sm:px-6"},wt={class:"text-theme-sm font-medium text-gray-900 dark:text-white"},_t={class:"px-5 py-4 sm:px-6"},Ct={key:0,class:"text-xs"},St={class:"px-5 py-4 sm:px-6"},It={class:"flex items-center justify-end gap-2"},jt=["onClick"],Dt=["onClick"],Ft=["onClick"],Mt=["onClick"];function Pt(j,e,x,r,y,b){const c=H("router-link");return s(),p(r.AdminLayout,null,{default:u(()=>[t("div",G,[n(" Page Header "),t("div",Y,[e[3]||(e[3]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Invoices"),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Manage client invoices, payments, and billing ")],-1)),f(c,{to:"/invoices/create",class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-brand-600 rounded-lg hover:bg-brand-700"},{default:u(()=>[...e[2]||(e[2]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" New Invoice ",-1)])]),_:1})]),n(" Stats Cards "),r.invoiceStore.stats?(s(),i("div",J,[t("div",K,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total Outstanding",-1)),t("p",Q," $"+l(r.formatCurrency(r.invoiceStore.stats.total_outstanding||0)),1)]),t("div",R,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Paid This Month",-1)),t("p",W," $"+l(r.formatCurrency(r.invoiceStore.stats.paid_this_month||0)),1)]),t("div",X,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Overdue",-1)),t("p",Z," $"+l(r.formatCurrency(r.invoiceStore.stats.total_overdue||0)),1)]),t("div",$,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Draft Invoices",-1)),t("p",tt,l(r.invoiceStore.stats.draft_count||0),1)])])):n("v-if",!0),n(" Search and Filters "),t("div",et,[t("div",rt,[t("div",at,[S(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.searchTerm=o),type:"text",placeholder:"Search invoices by number, client, or project...",class:"w-full px-4 py-2 pl-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white",onInput:r.handleSearch},null,544),[[N,r.searchTerm]]),e[8]||(e[8]=t("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),t("div",ot,[S(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.statusFilter=o),onChange:r.applyFilter,class:"px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},[...e[9]||(e[9]=[t("option",{value:"all"},"All Statuses",-1),t("option",{value:"draft"},"Draft",-1),t("option",{value:"sent"},"Sent",-1),t("option",{value:"viewed"},"Viewed",-1),t("option",{value:"paid"},"Paid",-1),t("option",{value:"overdue"},"Overdue",-1),t("option",{value:"cancelled"},"Cancelled",-1)])],544),[[O,r.statusFilter]])])]),n(" Invoices Table "),t("div",st,[n(" Loading State "),r.invoiceStore.loading?(s(),i("div",nt,[...e[10]||(e[10]=[t("div",{class:"inline-block w-8 h-8 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"Loading invoices...",-1)])])):r.invoiceStore.error?(s(),i(k,{key:1},[n(" Error State "),t("div",dt,[e[11]||(e[11]=t("div",{class:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20"},[t("svg",{class:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),t("p",it,l(r.invoiceStore.error),1),t("button",{onClick:r.loadInvoices,class:"mt-4 px-4 py-2 text-sm font-medium text-brand-600 hover:text-brand-700"}," Try Again ")])],2112)):r.displayedInvoices.length===0?(s(),i(k,{key:2},[n(" Empty State "),t("div",lt,[e[13]||(e[13]=t("div",{class:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800"},[t("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e[14]||(e[14]=t("p",{class:"mt-4 text-sm text-gray-900 dark:text-white font-medium"},"No invoices found",-1)),t("p",ct,l(r.searchTerm?"Try adjusting your search":"Get started by creating your first invoice"),1),r.searchTerm?n("v-if",!0):(s(),p(c,{key:0,to:"/invoices/create",class:"inline-flex items-center gap-2 mt-4 px-4 py-2 text-sm font-medium text-white bg-brand-600 rounded-lg hover:bg-brand-700"},{default:u(()=>[...e[12]||(e[12]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" Create Your First Invoice ",-1)])]),_:1}))])],2112)):(s(),i(k,{key:3},[n(" Table Content "),t("div",xt,[t("table",ut,[e[21]||(e[21]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Invoice")]),t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Client")]),t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Status")]),t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Amount")]),t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Due Date")]),t("th",{class:"px-5 py-3 text-right sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Actions")])])],-1)),t("tbody",gt,[(s(!0),i(k,null,E(r.displayedInvoices,o=>(s(),i("tr",{key:o.id,class:"border-t border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50"},[t("td",mt,[t("div",null,[f(c,{to:`/invoices/${o.id}`,class:"block font-medium text-gray-800 text-theme-sm dark:text-white/90 hover:text-brand-600 dark:hover:text-brand-400"},{default:u(()=>[m(l(o.invoice_number),1)]),_:2},1032,["to"]),o.project_name?(s(),i("span",yt,l(o.project_name),1)):n("v-if",!0)])]),t("td",kt,[t("div",pt,[o.client_name?(s(),i("p",vt,l(o.client_name),1)):(s(),i("p",ft," No client "))])]),t("td",ht,[t("span",{class:h(["inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded-full capitalize",r.getStatusClasses(o.status)])},[t("span",{class:h(["w-1.5 h-1.5 rounded-full",r.getStatusDotClasses(o.status)])},null,2),m(" "+l(o.status),1)],2)]),t("td",bt,[t("div",wt," $"+l(r.formatCurrency(o.total)),1)]),t("td",_t,[t("div",{class:h(["text-theme-sm",r.isOverdue(o)?"text-red-600 font-medium":"text-gray-600 dark:text-gray-400"])},[m(l(r.formatDate(o.due_date))+" ",1),r.isOverdue(o)?(s(),i("span",Ct,"(Overdue)")):n("v-if",!0)],2)]),t("td",St,[t("div",It,[f(c,{to:`/invoices/${o.id}`,class:"p-1.5 text-gray-600 hover:text-brand-600 dark:text-gray-400 dark:hover:text-brand-400",title:"View Invoice"},{default:u(()=>[...e[15]||(e[15]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),_:1},8,["to"]),o.status==="draft"?(s(),i("button",{key:0,onClick:g=>r.sendInvoice(o),class:"p-1.5 text-gray-600 hover:text-green-600 dark:text-gray-400 dark:hover:text-green-400",title:"Send Invoice"},[...e[16]||(e[16]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)])],8,jt)):n("v-if",!0),["sent","viewed","overdue"].includes(o.status)?(s(),i("button",{key:1,onClick:g=>r.markAsPaid(o),class:"p-1.5 text-gray-600 hover:text-green-600 dark:text-gray-400 dark:hover:text-green-400",title:"Mark as Paid"},[...e[17]||(e[17]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])],8,Dt)):n("v-if",!0),t("button",{onClick:g=>r.downloadPdf(o),class:"p-1.5 text-gray-600 hover:text-brand-600 dark:text-gray-400 dark:hover:text-brand-400",title:"Download PDF"},[...e[18]||(e[18]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])],8,Ft),o.status==="draft"?(s(),p(c,{key:2,to:`/invoices/${o.id}/edit`,class:"p-1.5 text-gray-600 hover:text-brand-600 dark:text-gray-400 dark:hover:text-brand-400",title:"Edit Invoice"},{default:u(()=>[...e[19]||(e[19]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["to"])):n("v-if",!0),o.status==="draft"?(s(),i("button",{key:3,onClick:g=>r.confirmDelete(o),class:"p-1.5 text-gray-600 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400",title:"Delete Invoice"},[...e[20]||(e[20]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Mt)):n("v-if",!0)])])]))),128))])])])],2112))])])]),_:1})}const zt=A(q,[["render",Pt],["__scopeId","data-v-c0e5abf1"],["__file","/home/btafoya/projects/openclient/resources/js/src/views/Invoices/InvoiceList.vue"]]);export{zt as default};
