import{_ as E,b as O,h as j,i as g,H as C,r as u,q as S,k as P,o as a,e as t,d as i,c as n,l as y,j as p,w as v,v as U,z as M,F as m,t as d,g as R,n as F,L as q}from"./main-Dw3b53V2.js";import{u as V}from"./projects-BLsGHutX.js";import{A as G}from"./AdminLayout-C6ZnkvFv.js";import"./index-B9ygI19o.js";const Y={__name:"ProjectList",setup(B,{expose:e}){e();const f=C(),r=V(),k=u(""),h=u("all"),c=u("all"),o=S(()=>{let s=r.filteredProjects;return c.value==="active"?s=s.filter(l=>l.is_active):c.value==="inactive"&&(s=s.filter(l=>!l.is_active)),s});async function x(){try{await r.fetchProjects(c.value!=="inactive")}catch(s){console.error("Failed to load projects:",s)}}function L(){r.setSearchTerm(k.value)}function T(){r.setStatusFilter(h.value),x()}async function A(s){try{await r.toggleActive(s.id)}catch(l){console.error("Failed to toggle project status:",l),alert("Failed to update project status. Please try again.")}}async function H(s){var l,_;if(confirm(`Are you sure you want to delete "${s.name}"? This action cannot be undone.`))try{await r.deleteProject(s.id)}catch(b){console.error("Failed to delete project:",b),(_=(l=b.response)==null?void 0:l.data)!=null&&_.reasons?alert(`Cannot delete project:
${b.response.data.reasons.join(`
`)}`):alert("Failed to delete project. Please try again.")}}function z(s){const l={planning:"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400",in_progress:"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400",on_hold:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400",completed:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"};return l[s]||l.planning}function N(s){const l={planning:"bg-blue-600",in_progress:"bg-green-600",on_hold:"bg-yellow-600",completed:"bg-gray-600"};return l[s]||l.planning}function D(s){return{planning:"Planning",in_progress:"In Progress",on_hold:"On Hold",completed:"Completed"}[s]||s}function I(){alert("CSV export functionality will be implemented in the CSV Import/Export component")}P(()=>{x()});const w={router:f,projectStore:r,searchTerm:k,statusFilter:h,activeFilter:c,displayedProjects:o,loadProjects:x,handleSearch:L,applyFilter:T,toggleProjectStatus:A,confirmDelete:H,getStatusClasses:z,getStatusDotClasses:N,getStatusLabel:D,exportToCSV:I,ref:u,computed:S,onMounted:P,get useRouter(){return C},get useProjectStore(){return V},AdminLayout:G};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}},J={class:"space-y-6"},K={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Q={class:"flex gap-3"},W={class:"flex flex-col gap-4 sm:flex-row sm:items-center"},X={class:"flex-1"},Z={class:"relative"},$={class:"flex gap-3"},tt={class:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},et={key:0,class:"p-8 text-center"},rt={class:"p-8 text-center"},ot={class:"mt-4 text-sm text-gray-900 dark:text-white font-medium"},st={class:"p-8 text-center"},at={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},lt={class:"max-w-full overflow-x-auto custom-scrollbar"},nt={class:"min-w-full"},dt={class:"divide-y divide-gray-200 dark:divide-gray-700"},it={class:"px-5 py-4 sm:px-6"},ct={key:0,class:"block text-gray-500 text-theme-xs dark:text-gray-400 mt-0.5 line-clamp-1"},gt={class:"px-5 py-4 sm:px-6"},xt={class:"text-theme-sm"},pt={key:0,class:"text-gray-700 dark:text-gray-300"},ut={key:1,class:"text-gray-400 dark:text-gray-500 italic"},yt={class:"px-5 py-4 sm:px-6"},mt={class:"px-5 py-4 sm:px-6"},kt={key:0,class:"text-theme-sm text-gray-700 dark:text-gray-300"},ht={key:1,class:"text-gray-400 dark:text-gray-500 text-theme-sm italic"},bt={class:"px-5 py-4 sm:px-6"},vt={class:"flex items-center gap-2"},ft={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2"},wt={class:"text-theme-xs text-gray-600 dark:text-gray-400 w-10 text-right"},_t={class:"px-5 py-4 sm:px-6"},jt={class:"flex items-center justify-end gap-2"},Ct=["onClick","title"],St={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pt={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Mt=["onClick"],Ft={key:0,class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},Vt={class:"p-4 bg-white rounded-lg border border-gray-200 dark:bg-white/[0.03] dark:border-gray-800"},Bt={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-white"},Lt={class:"p-4 bg-white rounded-lg border border-gray-200 dark:bg-white/[0.03] dark:border-gray-800"},Tt={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-white"},At={class:"p-4 bg-white rounded-lg border border-gray-200 dark:bg-white/[0.03] dark:border-gray-800"},Ht={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-white"},zt={class:"p-4 bg-white rounded-lg border border-gray-200 dark:bg-white/[0.03] dark:border-gray-800"},Nt={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-white"};function Dt(B,e,f,r,k,h){const c=O("router-link");return a(),j(r.AdminLayout,null,{default:g(()=>[t("div",J,[i(" Page Header "),t("div",K,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Projects"),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Manage project tracking, tasks, and time entries ")],-1)),t("div",Q,[t("button",{onClick:r.exportToCSV,class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700"},[...e[3]||(e[3]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),p(" Export CSV ",-1)])]),y(c,{to:"/projects/create",class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-brand-600 rounded-lg hover:bg-brand-700"},{default:g(()=>[...e[4]||(e[4]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),p(" New Project ",-1)])]),_:1})])]),i(" Search and Filters "),t("div",W,[t("div",X,[t("div",Z,[v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.searchTerm=o),type:"text",placeholder:"Search projects by name, description, or client...",class:"w-full px-4 py-2 pl-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white",onInput:r.handleSearch},null,544),[[U,r.searchTerm]]),e[6]||(e[6]=t("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),t("div",$,[v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.statusFilter=o),onChange:r.applyFilter,class:"px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},[...e[7]||(e[7]=[t("option",{value:"all"},"All Statuses",-1),t("option",{value:"planning"},"Planning",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"on_hold"},"On Hold",-1),t("option",{value:"completed"},"Completed",-1)])],544),[[M,r.statusFilter]]),v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.activeFilter=o),onChange:r.applyFilter,class:"px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},[...e[8]||(e[8]=[t("option",{value:"all"},"All Projects",-1),t("option",{value:"active"},"Active Only",-1),t("option",{value:"inactive"},"Inactive Only",-1)])],544),[[M,r.activeFilter]])])]),i(" Projects Table "),t("div",tt,[i(" Loading State "),r.projectStore.loading?(a(),n("div",et,[...e[9]||(e[9]=[t("div",{class:"inline-block w-8 h-8 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"Loading projects...",-1)])])):r.projectStore.error?(a(),n(m,{key:1},[i(" Error State "),t("div",rt,[e[10]||(e[10]=t("div",{class:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20"},[t("svg",{class:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),t("p",ot,d(r.projectStore.error),1),t("button",{onClick:r.loadProjects,class:"mt-4 px-4 py-2 text-sm font-medium text-brand-600 hover:text-brand-700"}," Try Again ")])],2112)):r.displayedProjects.length===0?(a(),n(m,{key:2},[i(" Empty State "),t("div",st,[e[12]||(e[12]=t("div",{class:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800"},[t("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e[13]||(e[13]=t("p",{class:"mt-4 text-sm text-gray-900 dark:text-white font-medium"},"No projects found",-1)),t("p",at,d(r.searchTerm?"Try adjusting your search":"Get started by creating your first project"),1),r.searchTerm?i("v-if",!0):(a(),j(c,{key:0,to:"/projects/create",class:"inline-flex items-center gap-2 mt-4 px-4 py-2 text-sm font-medium text-white bg-brand-600 rounded-lg hover:bg-brand-700"},{default:g(()=>[...e[11]||(e[11]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),p(" Create Your First Project ",-1)])]),_:1}))])],2112)):(a(),n(m,{key:3},[i(" Table Content "),t("div",lt,[t("table",nt,[e[19]||(e[19]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Project")]),t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Client")]),t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Status")]),t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Budget")]),t("th",{class:"px-5 py-3 text-left sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Progress")]),t("th",{class:"px-5 py-3 text-right sm:px-6"},[t("p",{class:"font-medium text-gray-500 text-theme-xs dark:text-gray-400"},"Actions")])])],-1)),t("tbody",dt,[(a(!0),n(m,null,R(r.displayedProjects,o=>(a(),n("tr",{key:o.id,class:"border-t border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50"},[t("td",it,[t("div",null,[y(c,{to:`/projects/${o.id}`,class:"block font-medium text-gray-800 text-theme-sm dark:text-white/90 hover:text-brand-600 dark:hover:text-brand-400"},{default:g(()=>[p(d(o.name),1)]),_:2},1032,["to"]),o.description?(a(),n("span",ct,d(o.description),1)):i("v-if",!0)])]),t("td",gt,[t("div",xt,[o.client_name?(a(),n("p",pt,d(o.client_name),1)):(a(),n("p",ut," No client "))])]),t("td",yt,[t("span",{class:F(["inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium rounded-full",r.getStatusClasses(o.status)])},[t("span",{class:F(["w-1.5 h-1.5 rounded-full",r.getStatusDotClasses(o.status)])},null,2),p(" "+d(r.getStatusLabel(o.status)),1)],2)]),t("td",mt,[o.budget?(a(),n("div",kt," $"+d(Number(o.budget).toLocaleString()),1)):(a(),n("div",ht," No budget "))]),t("td",bt,[t("div",vt,[t("div",ft,[t("div",{class:"bg-brand-600 h-2 rounded-full",style:q({width:`${o.progress||0}%`})},null,4)]),t("span",wt,d(o.progress||0)+"% ",1)])]),t("td",_t,[t("div",jt,[y(c,{to:`/projects/${o.id}`,class:"p-1.5 text-gray-600 hover:text-brand-600 dark:text-gray-400 dark:hover:text-brand-400",title:"View Project"},{default:g(()=>[...e[14]||(e[14]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),_:1},8,["to"]),y(c,{to:`/projects/${o.id}/edit`,class:"p-1.5 text-gray-600 hover:text-brand-600 dark:text-gray-400 dark:hover:text-brand-400",title:"Edit Project"},{default:g(()=>[...e[15]||(e[15]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["to"]),t("button",{onClick:x=>r.toggleProjectStatus(o),class:"p-1.5 text-gray-600 hover:text-yellow-600 dark:text-gray-400 dark:hover:text-yellow-400",title:o.is_active?"Deactivate":"Activate"},[o.is_active?(a(),n("svg",St,[...e[16]||(e[16]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"},null,-1)])])):(a(),n("svg",Pt,[...e[17]||(e[17]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))],8,Ct),t("button",{onClick:x=>r.confirmDelete(o),class:"p-1.5 text-gray-600 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400",title:"Delete Project"},[...e[18]||(e[18]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Mt)])])]))),128))])])])],2112))]),i(" Statistics Summary "),r.displayedProjects.length>0?(a(),n("div",Ft,[t("div",Vt,[e[20]||(e[20]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total Projects",-1)),t("p",Bt,d(r.projectStore.projectCount),1)]),t("div",Lt,[e[21]||(e[21]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Active Projects",-1)),t("p",Tt,d(r.projectStore.activeProjectCount),1)]),t("div",At,[e[22]||(e[22]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"In Progress",-1)),t("p",Ht,d(r.projectStore.projectStats.in_progress),1)]),t("div",zt,[e[23]||(e[23]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Completed",-1)),t("p",Nt,d(r.projectStore.projectStats.completed),1)])])):i("v-if",!0)])]),_:1})}const Rt=E(Y,[["render",Dt],["__scopeId","data-v-9d38c32f"],["__file","/home/btafoya/projects/openclient/resources/js/src/views/Projects/ProjectList.vue"]]);export{Rt as default};
