import{_ as A,h as x,i as D,r as c,q as f,k as _,o as i,e as t,d,c as s,j as U,l as O,w as C,v as z,z as R,F,g as S}from"./main-CeUa7Jrx.js";import{u as L,N as q,a as H}from"./NoteForm-Bwrw2BHR.js";import{A as G}from"./AdminLayout-B_43-oU8.js";import"./index-B9ygI19o.js";import"./clients-CIVaTSep.js";import"./contacts-72a7H74E.js";import"./projects-ITvZMXmG.js";const I={__name:"NoteList",setup(P,{expose:o}){o();const l=L(),e=c(""),u=c("all"),m=c(!1),r=c(null),p=f(()=>{let n=l.notes;if(e.value){const a=e.value.toLowerCase();n=n.filter(g=>{var h,k,w,b;return((h=g.content)==null?void 0:h.toLowerCase().includes(a))||((k=g.client_name)==null?void 0:k.toLowerCase().includes(a))||((w=g.contact_name)==null?void 0:w.toLowerCase().includes(a))||((b=g.project_name)==null?void 0:b.toLowerCase().includes(a))})}return u.value==="pinned"?n=n.filter(a=>a.is_pinned):u.value==="unpinned"&&(n=n.filter(a=>!a.is_pinned)),n}),T=f(()=>p.value.filter(n=>n.is_pinned)),j=f(()=>p.value.filter(n=>!n.is_pinned));async function y(){await l.fetchNotes()}function M(n){r.value={...n},m.value=!1}async function E(n){try{await l.deleteNote(n.id)}catch(a){console.error("Failed to delete note:",a)}}async function B(n){try{await l.togglePin(n.id)}catch(a){console.error("Failed to toggle pin:",a)}}async function V(n){try{r.value?await l.updateNote(r.value.id,n):await l.createNote(n),v()}catch(a){console.error("Failed to save note:",a)}}function v(){m.value=!1,r.value=null}_(()=>y());const N={noteStore:l,searchTerm:e,pinnedFilter:u,showCreateForm:m,editingNote:r,filteredNotes:p,pinnedNotes:T,regularNotes:j,loadNotes:y,handleEdit:M,handleDelete:E,handleTogglePin:B,handleFormSubmit:V,closeForm:v,ref:c,computed:f,onMounted:_,get useNoteStore(){return L},AdminLayout:G,NoteCard:H,NoteForm:q};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}},J={class:"space-y-6"},K={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Q={key:0,class:"mb-6"},W={class:"flex flex-col gap-4 sm:flex-row sm:items-center"},X={class:"flex-1 relative"},Y={key:1,class:"space-y-3"},Z={class:"space-y-3"},$={class:"space-y-3"},ee={key:0,class:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},te={key:1,class:"p-8 text-center"},oe={key:2,class:"p-8 text-center rounded-lg border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"},ne={key:3,class:"space-y-3"};function re(P,o,l,e,u,m){return i(),x(e.AdminLayout,null,{default:D(()=>[t("div",J,[t("div",K,[o[4]||(o[4]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Notes"),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Manage notes for clients, contacts, and projects")],-1)),t("button",{onClick:o[0]||(o[0]=r=>e.showCreateForm=!0),class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-brand-600 rounded-lg hover:bg-brand-700"},[...o[3]||(o[3]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),U(" New Note ",-1)])])]),d(" Create/Edit Form Modal "),e.showCreateForm||e.editingNote?(i(),s("div",Q,[O(e.NoteForm,{"initial-data":e.editingNote||{},"submit-text":e.editingNote?"Update Note":"Create Note",loading:e.noteStore.loading,onSubmit:e.handleFormSubmit,onCancel:e.closeForm},null,8,["initial-data","submit-text","loading"])])):d("v-if",!0),d(" Filters "),t("div",W,[t("div",X,[C(t("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>e.searchTerm=r),type:"text",placeholder:"Search notes...",class:"w-full px-4 py-2 pl-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white"},null,512),[[z,e.searchTerm]]),o[5]||(o[5]=t("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),C(t("select",{"onUpdate:modelValue":o[2]||(o[2]=r=>e.pinnedFilter=r),class:"px-4 py-2 text-sm border border-gray-300 rounded-lg dark:bg-gray-800 dark:border-gray-600 dark:text-white"},[...o[6]||(o[6]=[t("option",{value:"all"},"All Notes",-1),t("option",{value:"pinned"},"Pinned Only",-1),t("option",{value:"unpinned"},"Unpinned Only",-1)])],512),[[R,e.pinnedFilter]])]),d(" Pinned Notes Section "),e.pinnedNotes.length>0&&e.pinnedFilter!=="unpinned"?(i(),s("div",Y,[o[7]||(o[7]=t("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Pinned",-1)),t("div",Z,[(i(!0),s(F,null,S(e.pinnedNotes,r=>(i(),x(e.NoteCard,{key:r.id,note:r,onEdit:e.handleEdit,onDelete:e.handleDelete,onTogglePin:e.handleTogglePin},null,8,["note"]))),128))])])):d("v-if",!0),d(" Regular Notes Section "),t("div",$,[e.pinnedNotes.length>0&&e.pinnedFilter!=="pinned"?(i(),s("h2",ee," All Notes ")):d("v-if",!0),e.noteStore.loading?(i(),s("div",te,[...o[8]||(o[8]=[t("div",{class:"inline-block w-8 h-8 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"Loading...",-1)])])):e.filteredNotes.length===0?(i(),s("div",oe,[...o[9]||(o[9]=[t("p",{class:"text-sm text-gray-900 dark:text-white font-medium"},"No notes found",-1),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Create your first note to get started",-1)])])):(i(),s("div",ne,[(i(!0),s(F,null,S(e.regularNotes,r=>(i(),x(e.NoteCard,{key:r.id,note:r,onEdit:e.handleEdit,onDelete:e.handleDelete,onTogglePin:e.handleTogglePin},null,8,["note"]))),128))]))])])]),_:1})}const me=A(I,[["render",re],["__file","/home/btafoya/projects/openclient/resources/js/src/views/CRM/Notes/NoteList.vue"]]);export{me as default};
