import{_ as A,b as H,h as L,i as k,H as P,r as f,u as v,k as V,o as i,e as t,d as a,l as E,C as I,c as u,w as d,j as w,v as m,t as p,F as O,g as q,z as j,E as R}from"./main-DU1UAF-x.js";import{u as U}from"./projects-B-uUOWY7.js";import{u as B}from"./clients-DvlY7_j-.js";import{A as T}from"./AdminLayout-Baccdx-S.js";import"./index-B9ygI19o.js";const z={__name:"ProjectCreate",setup(F,{expose:e}){e();const y=P(),r=U(),g=B(),x=f([]),n=f(!1),o=f(null),b=v({}),s=v({name:"",description:"",client_id:"",status:"planning",priority:"medium",budget:"",start_date:"",end_date:"",is_active:!0});async function _(){try{await g.fetchClients(!0),x.value=g.clients}catch(c){console.error("Failed to load clients:",c)}}async function M(){var c,h,C,S;if(Object.keys(b).forEach(l=>delete b[l]),o.value=null,!((c=s.name)!=null&&c.trim())){b.name="Project name is required";return}n.value=!0;try{const l={name:s.name.trim(),description:((h=s.description)==null?void 0:h.trim())||null,client_id:s.client_id||null,status:s.status,priority:s.priority,budget:s.budget?parseFloat(s.budget):null,start_date:s.start_date||null,end_date:s.end_date||null,is_active:s.is_active},N=await r.createProject(l);y.push(`/projects/${N.id}`)}catch(l){o.value=((S=(C=l.response)==null?void 0:C.data)==null?void 0:S.error)||"Failed to create project",console.error("Failed to create project:",l)}finally{n.value=!1}}V(()=>{_()});const D={router:y,projectStore:r,clientStore:g,clients:x,submitting:n,submitError:o,errors:b,formData:s,loadClients:_,handleSubmit:M,ref:f,reactive:v,onMounted:V,get useRouter(){return P},get useProjectStore(){return U},get useClientStore(){return B},AdminLayout:T};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}},G={class:"mx-auto max-w-3xl"},J={class:"mb-6"},K={class:"flex items-center gap-3"},Q={class:"rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-800 dark:bg-gray-900"},W={class:"mb-6"},X={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Y={class:"sm:col-span-2"},Z={key:0,class:"mt-1 text-xs text-red-600"},$=["value"],tt={class:"relative"},et={class:"sm:col-span-2"},rt={class:"mb-6"},ot={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},at={class:"mb-6"},st={class:"flex items-center gap-3"},dt={key:0,class:"mb-4 rounded-lg bg-red-50 p-3 text-sm text-red-700 dark:bg-red-900/20 dark:text-red-400"},nt={class:"flex justify-end gap-3 border-t border-gray-200 pt-6 dark:border-gray-800"},lt=["disabled"],it={key:0,class:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"};function ut(F,e,y,r,g,x){const n=H("router-link");return i(),L(r.AdminLayout,null,{default:k(()=>[t("div",G,[a(" Header "),t("div",J,[t("div",K,[E(n,{to:"/projects",class:"rounded-lg p-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"},{default:k(()=>[...e[9]||(e[9]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),e[10]||(e[10]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Fill in the details below to create a new project ")],-1))])]),a(" Form "),t("div",Q,[t("form",{onSubmit:I(r.handleSubmit,["prevent"]),class:"p-6"},[a(" Basic Information "),t("div",W,[e[21]||(e[21]=t("h2",{class:"mb-4 text-lg font-semibold text-gray-900 dark:text-white"},"Basic Information",-1)),t("div",X,[a(" Project Name "),t("div",Y,[e[11]||(e[11]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"},[w(" Project Name "),t("span",{class:"text-red-500"},"*")],-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.formData.name=o),type:"text",required:"",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white",placeholder:"Enter project name"},null,512),[[m,r.formData.name]]),r.errors.name?(i(),u("p",Z,p(r.errors.name),1)):a("v-if",!0)]),a(" Client "),t("div",null,[e[13]||(e[13]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Client ",-1)),d(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.formData.client_id=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},[e[12]||(e[12]=t("option",{value:""},"No Client",-1)),(i(!0),u(O,null,q(r.clients,o=>(i(),u("option",{key:o.id,value:o.id},p(o.name),9,$))),128))],512),[[j,r.formData.client_id]])]),a(" Status "),t("div",null,[e[15]||(e[15]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Status ",-1)),d(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.formData.status=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},[...e[14]||(e[14]=[t("option",{value:"planning"},"Planning",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"on_hold"},"On Hold",-1),t("option",{value:"completed"},"Completed",-1)])],512),[[j,r.formData.status]])]),a(" Priority "),t("div",null,[e[17]||(e[17]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Priority ",-1)),d(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.formData.priority=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},[...e[16]||(e[16]=[t("option",{value:"low"},"Low",-1),t("option",{value:"medium"},"Medium",-1),t("option",{value:"high"},"High",-1),t("option",{value:"urgent"},"Urgent",-1)])],512),[[j,r.formData.priority]])]),a(" Budget "),t("div",null,[e[19]||(e[19]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Budget ",-1)),t("div",tt,[e[18]||(e[18]=t("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400"},"$",-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.formData.budget=o),type:"number",step:"0.01",min:"0",class:"w-full rounded-lg border border-gray-300 pl-7 pr-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white",placeholder:"0.00"},null,512),[[m,r.formData.budget]])])]),a(" Description "),t("div",et,[e[20]||(e[20]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Description ",-1)),d(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=o=>r.formData.description=o),rows:"3",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white",placeholder:"Describe the project..."},null,512),[[m,r.formData.description]])])])]),a(" Dates "),t("div",rt,[e[24]||(e[24]=t("h2",{class:"mb-4 text-lg font-semibold text-gray-900 dark:text-white"},"Schedule",-1)),t("div",ot,[a(" Start Date "),t("div",null,[e[22]||(e[22]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Start Date ",-1)),d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>r.formData.start_date=o),type:"date",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},null,512),[[m,r.formData.start_date]])]),a(" End Date "),t("div",null,[e[23]||(e[23]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300"}," End Date ",-1)),d(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>r.formData.end_date=o),type:"date",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},null,512),[[m,r.formData.end_date]])])])]),a(" Settings "),t("div",at,[e[26]||(e[26]=t("h2",{class:"mb-4 text-lg font-semibold text-gray-900 dark:text-white"},"Settings",-1)),t("label",st,[d(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>r.formData.is_active=o),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-brand-600 focus:ring-brand-500 dark:border-gray-700"},null,512),[[R,r.formData.is_active]]),e[25]||(e[25]=t("div",null,[t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Active Project"),t("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Active projects appear in the main project list and reports ")],-1))])]),a(" Error Message "),r.submitError?(i(),u("div",dt,p(r.submitError),1)):a("v-if",!0),a(" Actions "),t("div",nt,[E(n,{to:"/projects",class:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800"},{default:k(()=>[...e[27]||(e[27]=[w(" Cancel ",-1)])]),_:1}),t("button",{type:"submit",disabled:r.submitting,class:"inline-flex items-center gap-2 rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white hover:bg-brand-700 disabled:opacity-50 dark:bg-brand-500 dark:hover:bg-brand-600"},[r.submitting?(i(),u("span",it)):a("v-if",!0),w(" "+p(r.submitting?"Creating...":"Create Project"),1)],8,lt)])],32)])])]),_:1})}const pt=A(z,[["render",ut],["__file","/home/btafoya/projects/openclient/resources/js/src/views/Projects/ProjectCreate.vue"]]);export{pt as default};
